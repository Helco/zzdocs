{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"This is the home of the ZanZarah Knowledge Base, a project to gather as much (focus on technical) information as possible about the rather old PC-Game ZanZarah: The Hidden Portal made by Funatics Entertainment and originally released 2002 by THQ. The non-plus ultra goal of this project would be the recreation of the ZanZarah executable. Structure \u00b6 This wiki is first of all structured in four sections: Resources contain information about the fileformats and content Internal contain information about how the game behaves Gameplay contain information about what the player sees and interacts with Tools contain information about the tools created for this project Credits \u00b6 Before I started this project there were some people before me gathering useful information, some of which are stored here as well: The GTA Modding Wiki Dmitry \"kabbi\" Kabak","title":"Home"},{"location":"#structure","text":"This wiki is first of all structured in four sections: Resources contain information about the fileformats and content Internal contain information about how the game behaves Gameplay contain information about what the player sees and interacts with Tools contain information about the tools created for this project","title":"Structure"},{"location":"#credits","text":"Before I started this project there were some people before me gathering useful information, some of which are stored here as well: The GTA Modding Wiki Dmitry \"kabbi\" Kabak","title":"Credits"},{"location":"Status/","text":"Status \u00b6 Technical stuff \u00b6 Renderware files \u00b6 File extension Reading Writing Render Wiki Exports Imports DFF (Models) Yes No Yes Yes JSON None BSP (Worlds) Yes No Yes Yes JSON None SKA (Animations) Yes No Yes Yes JSON None ZanZarah specific files \u00b6 File extension Reading Writing Render Wiki Exports Imports ED (Effects) Yes No No No JSON None FBS (Database) Yes No N/A Yes JSON, SQLite None AED (Actor description) Yes No Yes No JSON None SCN (Scene description) Yes No Yes Partly JSON None DAT (Savefiles) No No N/A Yes None None CFG (game.cfg) No No N/A No None None CFG (map.cfg) Yes No N/A Yes JSON None CFG (ai.cfg/net.cfg/wizform.cfg) Yes No N/A Yes JSON None Other documentation to be done \u00b6 Section Done Script commands - basic labeling 83/84 Script commands - full reference 0/84 Backdrop descriptions 0/19 Trigger type descriptions 25/56 Behavior type descriptions 1/56 Ambient sound descriptions 0/15","title":"Status"},{"location":"Status/#status","text":"","title":"Status"},{"location":"Status/#technical-stuff","text":"","title":"Technical stuff"},{"location":"Status/#renderware-files","text":"File extension Reading Writing Render Wiki Exports Imports DFF (Models) Yes No Yes Yes JSON None BSP (Worlds) Yes No Yes Yes JSON None SKA (Animations) Yes No Yes Yes JSON None","title":"Renderware files"},{"location":"Status/#zanzarah-specific-files","text":"File extension Reading Writing Render Wiki Exports Imports ED (Effects) Yes No No No JSON None FBS (Database) Yes No N/A Yes JSON, SQLite None AED (Actor description) Yes No Yes No JSON None SCN (Scene description) Yes No Yes Partly JSON None DAT (Savefiles) No No N/A Yes None None CFG (game.cfg) No No N/A No None None CFG (map.cfg) Yes No N/A Yes JSON None CFG (ai.cfg/net.cfg/wizform.cfg) Yes No N/A Yes JSON None","title":"ZanZarah specific files"},{"location":"Status/#other-documentation-to-be-done","text":"Section Done Script commands - basic labeling 83/84 Script commands - full reference 0/84 Backdrop descriptions 0/19 Trigger type descriptions 25/56 Behavior type descriptions 1/56 Ambient sound descriptions 0/15","title":"Other documentation to be done"},{"location":"internal/AmbientSoundMgr/","text":"AmbientSounds \u00b6 The AmbientSound Manager plays 3D soundeffects at random intervals near the player. The collection of sound files it uses is one of 17 hardcoded collections selected by the AmbientSound scene section. Also the interval it plays new sounds are hardcoded chances selected by the scene file. Behaviour \u00b6 For each entry in the sound collection the AmbientSoundMgr has one emitter, even though it might not be playing. On each update (which happens for the AmbientSoundMgr only every 100ms) if some emitter is not playing, there is a random number generated between 1 and 100 (inclusive). If this number is smaller than the chanced declared by the collection a new sound may start. If multiple emitters are free a random emitter is chosen. It is placed randomly in a cube around the player with a side length of 20 units, but only on integer coordinates. Collections \u00b6 Value Sounds Description 0 1 2 4 5 6 7 8 9 10 11 12 14 15 16","title":"AmbientSounds"},{"location":"internal/AmbientSoundMgr/#ambientsounds","text":"The AmbientSound Manager plays 3D soundeffects at random intervals near the player. The collection of sound files it uses is one of 17 hardcoded collections selected by the AmbientSound scene section. Also the interval it plays new sounds are hardcoded chances selected by the scene file.","title":"AmbientSounds"},{"location":"internal/AmbientSoundMgr/#behaviour","text":"For each entry in the sound collection the AmbientSoundMgr has one emitter, even though it might not be playing. On each update (which happens for the AmbientSoundMgr only every 100ms) if some emitter is not playing, there is a random number generated between 1 and 100 (inclusive). If this number is smaller than the chanced declared by the collection a new sound may start. If multiple emitters are free a random emitter is chosen. It is placed randomly in a cube around the player with a side length of 20 units, but only on integer coordinates.","title":"Behaviour"},{"location":"internal/AmbientSoundMgr/#collections","text":"Value Sounds Description 0 1 2 4 5 6 7 8 9 10 11 12 14 15 16","title":"Collections"},{"location":"internal/Animals/","text":"Animals \u00b6 There exists a range of animals in the world of Zanzarah, none of which is essential to gameplay. The only animal type you can call essential would be the Pixie , but it is not seen internally as an animal, so this wiki won't either. Also animals internally usually have three components: The AnimalBase which is a reference used by the AnimalManager The AnimalController which holds and controls the actor, its animations, the location of the animal The AnimalBaseAI (mostly WaypointAI ) which control its behaviour. Every animal has at least one actor description file associated to it and an activation distance. Outside of this distance animals are not updated. Additionally animals use their trigger arguments (most have a speed parameter). Link Type Actor file Name Activation Distance [x] 0 a000sa00 a001sa00 Butterfly 120 [x] 1 a002sa01 Dragonfly 200 [x] 2 a003sa02 a005sa04 Brown bird White? bird 400 3 unused type [x] 4 a004sa03 Frog 300 [x] 5 a005sa04 Blue bird 5000 [x] 6 -/- Firefly 700 [x] 7 a006sa05 a007sa06 Red bug green bug 120 [x] 8 -/- Collection fairy 700 [x] 9 a008sa07 Rabbit 300 [x] 10 a020sa20 a021sa20 Brown chicken White chicken 500 [x] 11 u010s10m \"Black pixie\" 300 Butterfly \u00b6 The butterfly chooses randomly with equal chances between his two actor files. The speed is stored in the ii2 argument ( speed = ii2 * 0.001 ). It rotates in an 8 shape and normally does not check for collisions with the world. In almost all cases it first rotates clock-wise?, but with a very small chance (about 1 to 2^31) it rotates the other way around. This is most likely a bug by the programmer, as the original formula looks like this: randomFloat() <= 0.0 ButterflyAI \u00b6 In Pseudo-code the AI update looks like this: degreeDelta = timeDelta * 40 newDegrees = lastDegrees + degreeDelta lastDegrees = newDegrees if (newDegrees > 360) { degreeDelta -= (360 - degreeDelta) rotateDir *= -1 lastDegrees = 0 } rotateY(degreeDelta * rotateDir) moveForward(speed * timeDelta) Dragonfly \u00b6 The dragonfly uses the WaypointAI with a max idle time of 4 and a speed of 5. It does not flee nor crawl. Bird \u00b6 If there is a single bird trigger in the scene, four bird slots are created for the whole scene. More triggers do not mean more birds. Birds are spawned when their slot is free and they follow a simple movement pattern. Between the two actor files are chosen randomly with equal distribution, their speed is fixed at 4. BirdAI (implemented directly in their update function, not as AI class) \u00b6 If they haven't spawned yet or are marked as spawnable, they may spawn each frame with a chance of 60% and run this code: setLocationToTrigger() v1 = Vector( triggerDir.X * -1, 0, triggerDir.Y * -1) move( normalize(v1) * 10 ) pitchSpeed = ii3 * 0.001 distanceLeft = (randomFloat()+0.5) * 50 if they are spawned their update code looks like this: moveDistance = speed * timeDelta; // remember: speed is fixed at 4 newDistanceLeft = distanceLeft - moveDistance if (newDistanceLeft > 0) { triggerDir.y += timeDelta * pitchSpeed setDirection(triggerDir) move( triggerDir * moveDistance ) } else markAsSpawnable(); Frog \u00b6 The frog has just one actor file, it uses the WaypointAI and moves with a speed of 5. It does not flee, but crawl in full cycles and idles at max 5 seconds. BlueBird \u00b6 The blue bird has just one actor file and uses a custom AI . It circles around a center point defined by moving ii2 * 0.01 units from the trigger in trigger direction. Its speed is ii3 * 0.001 . BlueBirdAI \u00b6 moveSin = sin(timeDelta * speed) moveCos = sin(timeDelta * speed) deltaPos = pos - center newPos = center + Vector( moveCos * deltaPos.X - moveSin * deltaPos.Z, pos.Y, moveSin * deltaPos.X + moveCos * deltaPos.Z) setDirection( normalize( newPos - pos) ) setPosition( newPos ) Firefly \u00b6 The firefly does not have an actor file, instead it uses the effect 4018. It is controlled by the WaypointAI . Its speed is set at spawn as randomFloat() * 3.0 , as well as his max idle time randomFloat() . Also at start his max bounce height is set to ii2 * 0.5 and a start bounce is set as random integer value between 0 and maxBounce . It uses an additional update functionality: curBounce += timeDelta * 1000 if (curBounce > maxBounce) { curBounce = 0; maxBounce = randomFloat() * 600 + 400; // yes this overwrites the parameter ii2 } moveUp( sin( curBounce * 2 * PI / maxBounce ) * 0.02) Bug \u00b6 The bug chooses randomly with equal distribution between his two actor files. It crawls at a fixed speed of 0.2 according to the WaypointAI . It does not flee. CollectionFairy \u00b6 The collection fairy is the only animal type, that can not be put in a scene, as in \"it will not spawn if put into a scene file\". It is spawned automatically based on the unused fairies of the player and the CollectionWizform triggers , which only occur in London. It uses its own AI and is not influenced by any trigger arguments. The fairy type and thus its actor file is set upon spawn, the frequency at which the fairy bounces is also set at spawn to randomFloat() * 40 + 60 . CollectionFairyAI \u00b6 posOffset = Vector( 0.1 * cos(allTime * 0.0033333), 0.02 * cos(allTime / bounceFreq), 0.1 * sin(allTime * 0.0033333)) dirToPlayer = normalize( playerPos - triggerPos ) setPosition( triggerPos - dirToPlayer + posOffset ); lookAt(playerPos) Rabbit \u00b6 Rabbits only have one actor file, they crawl at a speed of 2.1 in full cycles lead by the WaypointAI , whilst idling at max 5 seconds. They do not flee from the player. Chicken \u00b6 Chicken have two actor files, chosen by their trigger argument ii2 . They use the WaypointAI and are the only one using this AI, which do flee from the player. They crawl at a speed of 2.1 and idle at max 6 seconds. Furthermore they are placed at a random animal waypoint around their actual waypoint, but not at those whose distance is greater than 500. Black pixie \u00b6 Before starting: the name \"Black Pixie\" may not be the internal name. Internal names are not found yet and this name may be highly inaccurate. Maybe some day one of the original developers will tell us more about it. The black pixie only has a single actor file, it uses the WaypointAI and crawls at a speed of 2.1 in full cycles. It idles at max 5 seconds. WaypointAI \u00b6 Last but not least, the WaypointAI shall be described. It is the most used animal AI in the game, but also has some specialized behaviour for different animals. TODO","title":"Animals"},{"location":"internal/Animals/#animals","text":"There exists a range of animals in the world of Zanzarah, none of which is essential to gameplay. The only animal type you can call essential would be the Pixie , but it is not seen internally as an animal, so this wiki won't either. Also animals internally usually have three components: The AnimalBase which is a reference used by the AnimalManager The AnimalController which holds and controls the actor, its animations, the location of the animal The AnimalBaseAI (mostly WaypointAI ) which control its behaviour. Every animal has at least one actor description file associated to it and an activation distance. Outside of this distance animals are not updated. Additionally animals use their trigger arguments (most have a speed parameter). Link Type Actor file Name Activation Distance [x] 0 a000sa00 a001sa00 Butterfly 120 [x] 1 a002sa01 Dragonfly 200 [x] 2 a003sa02 a005sa04 Brown bird White? bird 400 3 unused type [x] 4 a004sa03 Frog 300 [x] 5 a005sa04 Blue bird 5000 [x] 6 -/- Firefly 700 [x] 7 a006sa05 a007sa06 Red bug green bug 120 [x] 8 -/- Collection fairy 700 [x] 9 a008sa07 Rabbit 300 [x] 10 a020sa20 a021sa20 Brown chicken White chicken 500 [x] 11 u010s10m \"Black pixie\" 300","title":"Animals"},{"location":"internal/Animals/#butterfly","text":"The butterfly chooses randomly with equal chances between his two actor files. The speed is stored in the ii2 argument ( speed = ii2 * 0.001 ). It rotates in an 8 shape and normally does not check for collisions with the world. In almost all cases it first rotates clock-wise?, but with a very small chance (about 1 to 2^31) it rotates the other way around. This is most likely a bug by the programmer, as the original formula looks like this: randomFloat() <= 0.0","title":"Butterfly"},{"location":"internal/Animals/#butterflyai","text":"In Pseudo-code the AI update looks like this: degreeDelta = timeDelta * 40 newDegrees = lastDegrees + degreeDelta lastDegrees = newDegrees if (newDegrees > 360) { degreeDelta -= (360 - degreeDelta) rotateDir *= -1 lastDegrees = 0 } rotateY(degreeDelta * rotateDir) moveForward(speed * timeDelta)","title":"ButterflyAI"},{"location":"internal/Animals/#dragonfly","text":"The dragonfly uses the WaypointAI with a max idle time of 4 and a speed of 5. It does not flee nor crawl.","title":"Dragonfly"},{"location":"internal/Animals/#bird","text":"If there is a single bird trigger in the scene, four bird slots are created for the whole scene. More triggers do not mean more birds. Birds are spawned when their slot is free and they follow a simple movement pattern. Between the two actor files are chosen randomly with equal distribution, their speed is fixed at 4.","title":"Bird"},{"location":"internal/Animals/#birdai-implemented-directly-in-their-update-function-not-as-ai-class","text":"If they haven't spawned yet or are marked as spawnable, they may spawn each frame with a chance of 60% and run this code: setLocationToTrigger() v1 = Vector( triggerDir.X * -1, 0, triggerDir.Y * -1) move( normalize(v1) * 10 ) pitchSpeed = ii3 * 0.001 distanceLeft = (randomFloat()+0.5) * 50 if they are spawned their update code looks like this: moveDistance = speed * timeDelta; // remember: speed is fixed at 4 newDistanceLeft = distanceLeft - moveDistance if (newDistanceLeft > 0) { triggerDir.y += timeDelta * pitchSpeed setDirection(triggerDir) move( triggerDir * moveDistance ) } else markAsSpawnable();","title":"BirdAI (implemented directly in their update function, not as AI class)"},{"location":"internal/Animals/#frog","text":"The frog has just one actor file, it uses the WaypointAI and moves with a speed of 5. It does not flee, but crawl in full cycles and idles at max 5 seconds.","title":"Frog"},{"location":"internal/Animals/#bluebird","text":"The blue bird has just one actor file and uses a custom AI . It circles around a center point defined by moving ii2 * 0.01 units from the trigger in trigger direction. Its speed is ii3 * 0.001 .","title":"BlueBird"},{"location":"internal/Animals/#bluebirdai","text":"moveSin = sin(timeDelta * speed) moveCos = sin(timeDelta * speed) deltaPos = pos - center newPos = center + Vector( moveCos * deltaPos.X - moveSin * deltaPos.Z, pos.Y, moveSin * deltaPos.X + moveCos * deltaPos.Z) setDirection( normalize( newPos - pos) ) setPosition( newPos )","title":"BlueBirdAI"},{"location":"internal/Animals/#firefly","text":"The firefly does not have an actor file, instead it uses the effect 4018. It is controlled by the WaypointAI . Its speed is set at spawn as randomFloat() * 3.0 , as well as his max idle time randomFloat() . Also at start his max bounce height is set to ii2 * 0.5 and a start bounce is set as random integer value between 0 and maxBounce . It uses an additional update functionality: curBounce += timeDelta * 1000 if (curBounce > maxBounce) { curBounce = 0; maxBounce = randomFloat() * 600 + 400; // yes this overwrites the parameter ii2 } moveUp( sin( curBounce * 2 * PI / maxBounce ) * 0.02)","title":"Firefly"},{"location":"internal/Animals/#bug","text":"The bug chooses randomly with equal distribution between his two actor files. It crawls at a fixed speed of 0.2 according to the WaypointAI . It does not flee.","title":"Bug"},{"location":"internal/Animals/#collectionfairy","text":"The collection fairy is the only animal type, that can not be put in a scene, as in \"it will not spawn if put into a scene file\". It is spawned automatically based on the unused fairies of the player and the CollectionWizform triggers , which only occur in London. It uses its own AI and is not influenced by any trigger arguments. The fairy type and thus its actor file is set upon spawn, the frequency at which the fairy bounces is also set at spawn to randomFloat() * 40 + 60 .","title":"CollectionFairy"},{"location":"internal/Animals/#collectionfairyai","text":"posOffset = Vector( 0.1 * cos(allTime * 0.0033333), 0.02 * cos(allTime / bounceFreq), 0.1 * sin(allTime * 0.0033333)) dirToPlayer = normalize( playerPos - triggerPos ) setPosition( triggerPos - dirToPlayer + posOffset ); lookAt(playerPos)","title":"CollectionFairyAI"},{"location":"internal/Animals/#rabbit","text":"Rabbits only have one actor file, they crawl at a speed of 2.1 in full cycles lead by the WaypointAI , whilst idling at max 5 seconds. They do not flee from the player.","title":"Rabbit"},{"location":"internal/Animals/#chicken","text":"Chicken have two actor files, chosen by their trigger argument ii2 . They use the WaypointAI and are the only one using this AI, which do flee from the player. They crawl at a speed of 2.1 and idle at max 6 seconds. Furthermore they are placed at a random animal waypoint around their actual waypoint, but not at those whose distance is greater than 500.","title":"Chicken"},{"location":"internal/Animals/#black-pixie","text":"Before starting: the name \"Black Pixie\" may not be the internal name. Internal names are not found yet and this name may be highly inaccurate. Maybe some day one of the original developers will tell us more about it. The black pixie only has a single actor file, it uses the WaypointAI and crawls at a speed of 2.1 in full cycles. It idles at max 5 seconds.","title":"Black pixie"},{"location":"internal/Animals/#waypointai","text":"Last but not least, the WaypointAI shall be described. It is the most used animal AI in the game, but also has some specialized behaviour for different animals. TODO","title":"WaypointAI"},{"location":"internal/Behaviors/","text":"Model behaviors \u00b6 This page lists certain special model behavior types and describes them in a bit more detail. Locked doors \u00b6 This affects the following behaviors: DoorGold, DoorSilver, CityDoorLock, DoorCopper, DoorBronze, DoorIron, DoorGlass, DoorRed, DoorYellow, DoorBlue . These are all doors, which are unlocked by standing near (< 3.0) the door whilst having the right item in the inventory. The mapping which item unlocks what is hardcoded: Door behavior CardId Item name (maybe not be accurate) DoorGold 21 Catacomb key DoorSilver 22 Heavy iron key CityDoorLock 22 Heavy iron key DoorCopper 23 Key of the pixie guard DoorBronze 24 Rufus' key DoorIron 25 Dwarf factory key DoorGlass 27 Towns hall key DoorRed 71 Red bone key DoorYellow 72 Green bone key DoorBlue 73 Blue bone key Collectable \u00b6 The collectable behavior is essentially an item, because the item id the player gets is determined by the model filename (itm###.dff), not all items can be collected by an item bag/catching sphere. Additionally there are three special item models (itmxxx.dff / itmyyy.dff / itmzzz.dff) which have hardcoded random items they can give up on picking up: itmxxx \u00b6 Chance Item 40% 3-9 Gold 30% Small healing potion 15% Normal healing potion 10% Big healing potion 5% Healing herb itmyyy \u00b6 Chance Item 40% Small healing potion 20% Garlic 10% Normal healing potion 10% Big healing potion 10% Healing herb 10% Mana potion itmzzz \u00b6 Chance Item 33% Big healing potion 16% Healing herb 16% Mana potion 16% Garlic 16% Golden carrot Of course the values are 33,3...% and 16,6...%","title":"Model behaviors"},{"location":"internal/Behaviors/#model-behaviors","text":"This page lists certain special model behavior types and describes them in a bit more detail.","title":"Model behaviors"},{"location":"internal/Behaviors/#locked-doors","text":"This affects the following behaviors: DoorGold, DoorSilver, CityDoorLock, DoorCopper, DoorBronze, DoorIron, DoorGlass, DoorRed, DoorYellow, DoorBlue . These are all doors, which are unlocked by standing near (< 3.0) the door whilst having the right item in the inventory. The mapping which item unlocks what is hardcoded: Door behavior CardId Item name (maybe not be accurate) DoorGold 21 Catacomb key DoorSilver 22 Heavy iron key CityDoorLock 22 Heavy iron key DoorCopper 23 Key of the pixie guard DoorBronze 24 Rufus' key DoorIron 25 Dwarf factory key DoorGlass 27 Towns hall key DoorRed 71 Red bone key DoorYellow 72 Green bone key DoorBlue 73 Blue bone key","title":"Locked doors"},{"location":"internal/Behaviors/#collectable","text":"The collectable behavior is essentially an item, because the item id the player gets is determined by the model filename (itm###.dff), not all items can be collected by an item bag/catching sphere. Additionally there are three special item models (itmxxx.dff / itmyyy.dff / itmzzz.dff) which have hardcoded random items they can give up on picking up:","title":"Collectable"},{"location":"internal/Behaviors/#itmxxx","text":"Chance Item 40% 3-9 Gold 30% Small healing potion 15% Normal healing potion 10% Big healing potion 5% Healing herb","title":"itmxxx"},{"location":"internal/Behaviors/#itmyyy","text":"Chance Item 40% Small healing potion 20% Garlic 10% Normal healing potion 10% Big healing potion 10% Healing herb 10% Mana potion","title":"itmyyy"},{"location":"internal/Behaviors/#itmzzz","text":"Chance Item 33% Big healing potion 16% Healing herb 16% Mana potion 16% Garlic 16% Golden carrot Of course the values are 33,3...% and 16,6...%","title":"itmzzz"},{"location":"internal/CardId/","text":"CardId \u00b6 The CardId is used by ZanZarah to have a (or another) unique identifier to address items, fairies and spells. Format \u00b6 The CardId can be split up in three distinct numbers which hold information: Bits Description 0-7 Unknown field, propably a validation (set to 0xff) 8-15 Type of the CardID (0 = Item, 1 = Spell, 2 = Fairy) 16-31 ID of entity","title":"CardId"},{"location":"internal/CardId/#cardid","text":"The CardId is used by ZanZarah to have a (or another) unique identifier to address items, fairies and spells.","title":"CardId"},{"location":"internal/CardId/#format","text":"The CardId can be split up in three distinct numbers which hold information: Bits Description 0-7 Unknown field, propably a validation (set to 0xff) 8-15 Type of the CardID (0 = Item, 1 = Spell, 2 = Fairy) 16-31 ID of entity","title":"Format"},{"location":"internal/Classes/","text":"Element classes \u00b6 Value Internal name 0 none 1 Nature 2 Air 3 Water 4 Light 5 Energy 6 Mental 7 Stone 8 Ice 9 Fire 10 Dark 11 Chaos 12 Metal 13 Neutral One should point out that values 0 and 13 are used in spell requirements where they signal whether every or no spell may require the particular slot.","title":"Element classes"},{"location":"internal/Classes/#element-classes","text":"Value Internal name 0 none 1 Nature 2 Air 3 Water 4 Light 5 Energy 6 Mental 7 Stone 8 Ice 9 Fire 10 Dark 11 Chaos 12 Metal 13 Neutral One should point out that values 0 and 13 are used in spell requirements where they signal whether every or no spell may require the particular slot.","title":"Element classes"},{"location":"internal/GlobalVars/","text":"Global variables \u00b6 There are two script commands referring global variables ( setGlobal and beginIf_global ), but these commands don't occur in any scripts in the database. It seems like this system was once used but later deprecated and remained unused until release. Internal workings \u00b6 The two script commands are implemented in the executable and do set one of 49 variables saved in a special class. They are also saved as end section of every savefile, but the values of the variables stay zero. Every variable has an internal change counter which is initialized to a random value (for reasons unknown) between 0 and 2^16. It stands to reason that this system was deprecated as numeric variable identifiers are not very user-friendly.","title":"Global variables"},{"location":"internal/GlobalVars/#global-variables","text":"There are two script commands referring global variables ( setGlobal and beginIf_global ), but these commands don't occur in any scripts in the database. It seems like this system was once used but later deprecated and remained unused until release.","title":"Global variables"},{"location":"internal/GlobalVars/#internal-workings","text":"The two script commands are implemented in the executable and do set one of 49 variables saved in a special class. They are also saved as end section of every savefile, but the values of the variables stay zero. Every variable has an internal change counter which is initialized to a random value (for reasons unknown) between 0 and 2^16. It stands to reason that this system was deprecated as numeric variable identifiers are not very user-friendly.","title":"Internal workings"},{"location":"internal/Scripts/","text":"Script language \u00b6 General information \u00b6 Every script is stored in the database . There are 6 different locations a script may be stored: Module Column Impl. Description fb0x01 Script1 3 This script is executed when the NPC is activated, it often contains dialog control fb0x01 Script2 1 This script seems to be executed when the NPC is deployed, it mostly contains setModel instructions fb0x01 Script3 1 This script seems to be executed on a cyclic basis, but the details are not known yet fb0x01 Script4 3 This script is executed if the player wins a fight against the NPC fb0x01 Script5 3 This script is executed if the player loses a fight against the NPC, mostly contains killPlayer instructions fb0x04 Script 2 This script is executed when the item is used on some fairy. It does everything from healing to evolving General format \u00b6 ZanZarah scripts are written one command per line. The first character always denotes the command, after this there may be up to 3 arguments (decimal numbers or UIDs) seperated by a period. For every command character there exists a long form command that is more human-readable. These forms are extracted from the executable. Implementations \u00b6 It seems like there are four different implementations and the base implementation which triggers errors for every command except the pure structural ones: The implementations may use the following commands: setModel, setCamera, wizform, spell, changeWaypoint, lookAtPlayer, removeNpc, ifTriggerIsActive, moveSystem, movementSpeed, lockUserInput, playAnimation, startPrelude, setNpcType, deployNpcAtTrigger, ifCloseToWaypoint, ifNpcModifierHasValue, setNpcModifier, defaultWizform, idle, ifPlayerIsClose, setCollision, createDynamicItems, revive, lookAtTrigger modifySpeed, ifIsWizform say, choice, waitForUser, setCamera, changeWaypoint, fight, changeDatabase, removeNpc, catchWizform, killPlayer, tradingCurrency, tradingItem, tradingSpell, tradingWizform, givePlayerCards, setupGambling, ifPlayerHasCards, ifPlayerHasSpecials, ifTriggerIsActive, removePlayerCards, lockUserInput, modifyTrigger, playAnimation, npcWizFormEscapes, talk, chafferWizForms, deployNpcAtTrigger, delay, removeWizForms, ifNpcModifierHasValue, setNpcModifier, ifPlayerIsClose, ifNumberOfNpcsIs, startEffect, setTalkLabels, tradeWizform, createDynamicItems, playVideo, removeNpcAtTrigger, revive, ifTriggerIsEnabled, playSound, playInArena, endActorEffect, createSceneObjects, removeBehavior, unlockDoor, endGame, subGame, modifyEffect, playPlayerAnimation, playAmyVoice, createDynamicModel, deploySound, givePlayerPresent dance Default scripts \u00b6 There are several default scripts hidden in the executable, three of which refer to wild fairies attacking the player, the fourth one sets up some fight with 5 fairies. This last one is most likely a debug fight. Wild fairy attacks player (executed as NPC script 1) \u00b6 fightInArena0.0 exit Player wins a fight against a wild fairy (executed as NPC script 4) \u00b6 if killed ???.10 //opcode yet to be known npcWizFormEscapes else if catched say.2627D615.1 (do you want to catch this fairy) choice.0.B2153621 (yes) choice.1.2F5B3621 (no) waitForUser label.0 removePlayerCards.1.0.arg //arg is the item id of the sphere used catchWizform waitForUser exit label.1 npcWizFormEscapes waitForUser exit Player loses a fight against a wild fairy (executed as NPC script 5) \u00b6 killPlayer exit Debug script to test fights? (executed as NPC script 2) \u00b6 enterWizform.0.1.1 //Viteria enterSpell.0.0.0 enterSpell.0.1.60 enterSpell.0.2.10 enterSpell.0.3.70 setNPCType.3 enterWizform.1.15.1 //Rasrow enterSpell.1.0.0 enterSpell.1.1.61 enterSpell.1.2.11 enterSpell.1.3.70 setNPCType.3 enterWizform.2.10.1 //Corgot enterSpell.2.0.0 enterSpell.2.1.62 enterSpell.2.2.12 enterSpell.2.3.72 setNPCType.3 enterWizform.3.57.1 //Tinefol enterSpell.3.0.0 enterSpell.3.1.63 enterSpell.3.2.13 enterSpell.3.3.73 setNPCType.3 enterWizform.4.4.1 //Gremor enterSpell.4.0.0 enterSpell.4.1.64 enterSpell.4.2.14 enterSpell.4.3.74 setNPCType.3 exit Commands \u00b6 Char Max args Name Description ! 2 say triggers a dialog line C 1 setModel single arg is name of AED file \" 2 choice # 0 waitForUser $ 1 label single arg is numeric label identifier, used with goto command & 1 setCamera moves the camera % 0 exit stops script execution ' 3 wizform adds a fairy ( 3 spell adds a spell 8 0 else sometimes refered as \"item\" ) 2 changeWaypoint * 2 fight starts a duel + 2 lookAtPlayer , 1 changeDatabase - 0 removeNpc removes a NPC . 0 catchWizform 0 0 killPlayer 5 1 tradingCurrency 2 2 tradingItem 3 2 tradingSpell 4 2 tradingWizform 1 3 givePlayerCards B 3 setupGambling 6 3 ifPlayerHasCards @ 2 ifPlayerHasSpecials = 1 ifTriggerIsActive 9 3 removePlayerCards : 2 moveSystem ? 1 movementSpeed ; 2 modifyWizform < 1 lockUserInput > 3 modifyTrigger A 2 playAnimation D 1 ifIsWizform E 0 startPrelude F 0 npcWizFormEscapes G 1 dance H 2 setGlobal I 2 beginIf_global J 2 talk K 1 goto L 2 gotoRandomLabel M 3 ask N 3 chafferWizForms O 1 setNpcType P 2 deployNpcAtTrigger Q 1 delay R 2 gotoLabelByRandom S 1 ifCloseToWaypoint T 0 removeWizForms U 1 ifNpcModifierHasValue V 3 setNpcModifier W 3 defaultWizForm X 0 idle Y 1 ifPlayerIsClose Z 2 ifNumberOfNpcsIs [ 2 startEffect \\ 3 setTalkLabels ] 1 setCollision ^ 1 tradeWizform _ 3 createDynamicItems ` 1 playVideo a 1 removeNpcAtTrigger b 0 revive c 2 lookAtTrigger d 1 ifTriggerIsEnabled e 1 playSound f 2 playInArena g 1 startActorEffect h 0 endActorEffect i 1 createSceneObjects j 1 evolveWizForm k 1 removeBehavior l 2 unlockDoor m 0 endGame n 3 defaultDeck o 3 subGame p 3 modifyEffect q 2 playPlayerAnimation s 1 playAmyVoice r 3 createDynamicModel t 2 deploySound u 1 givePlayerPresent 7 0 endIf","title":"Script language"},{"location":"internal/Scripts/#script-language","text":"","title":"Script language"},{"location":"internal/Scripts/#general-information","text":"Every script is stored in the database . There are 6 different locations a script may be stored: Module Column Impl. Description fb0x01 Script1 3 This script is executed when the NPC is activated, it often contains dialog control fb0x01 Script2 1 This script seems to be executed when the NPC is deployed, it mostly contains setModel instructions fb0x01 Script3 1 This script seems to be executed on a cyclic basis, but the details are not known yet fb0x01 Script4 3 This script is executed if the player wins a fight against the NPC fb0x01 Script5 3 This script is executed if the player loses a fight against the NPC, mostly contains killPlayer instructions fb0x04 Script 2 This script is executed when the item is used on some fairy. It does everything from healing to evolving","title":"General information"},{"location":"internal/Scripts/#general-format","text":"ZanZarah scripts are written one command per line. The first character always denotes the command, after this there may be up to 3 arguments (decimal numbers or UIDs) seperated by a period. For every command character there exists a long form command that is more human-readable. These forms are extracted from the executable.","title":"General format"},{"location":"internal/Scripts/#implementations","text":"It seems like there are four different implementations and the base implementation which triggers errors for every command except the pure structural ones: The implementations may use the following commands: setModel, setCamera, wizform, spell, changeWaypoint, lookAtPlayer, removeNpc, ifTriggerIsActive, moveSystem, movementSpeed, lockUserInput, playAnimation, startPrelude, setNpcType, deployNpcAtTrigger, ifCloseToWaypoint, ifNpcModifierHasValue, setNpcModifier, defaultWizform, idle, ifPlayerIsClose, setCollision, createDynamicItems, revive, lookAtTrigger modifySpeed, ifIsWizform say, choice, waitForUser, setCamera, changeWaypoint, fight, changeDatabase, removeNpc, catchWizform, killPlayer, tradingCurrency, tradingItem, tradingSpell, tradingWizform, givePlayerCards, setupGambling, ifPlayerHasCards, ifPlayerHasSpecials, ifTriggerIsActive, removePlayerCards, lockUserInput, modifyTrigger, playAnimation, npcWizFormEscapes, talk, chafferWizForms, deployNpcAtTrigger, delay, removeWizForms, ifNpcModifierHasValue, setNpcModifier, ifPlayerIsClose, ifNumberOfNpcsIs, startEffect, setTalkLabels, tradeWizform, createDynamicItems, playVideo, removeNpcAtTrigger, revive, ifTriggerIsEnabled, playSound, playInArena, endActorEffect, createSceneObjects, removeBehavior, unlockDoor, endGame, subGame, modifyEffect, playPlayerAnimation, playAmyVoice, createDynamicModel, deploySound, givePlayerPresent dance","title":"Implementations"},{"location":"internal/Scripts/#default-scripts","text":"There are several default scripts hidden in the executable, three of which refer to wild fairies attacking the player, the fourth one sets up some fight with 5 fairies. This last one is most likely a debug fight.","title":"Default scripts"},{"location":"internal/Scripts/#wild-fairy-attacks-player-executed-as-npc-script-1","text":"fightInArena0.0 exit","title":"Wild fairy attacks player (executed as NPC script 1)"},{"location":"internal/Scripts/#player-wins-a-fight-against-a-wild-fairy-executed-as-npc-script-4","text":"if killed ???.10 //opcode yet to be known npcWizFormEscapes else if catched say.2627D615.1 (do you want to catch this fairy) choice.0.B2153621 (yes) choice.1.2F5B3621 (no) waitForUser label.0 removePlayerCards.1.0.arg //arg is the item id of the sphere used catchWizform waitForUser exit label.1 npcWizFormEscapes waitForUser exit","title":"Player wins a fight against a wild fairy (executed as NPC script 4)"},{"location":"internal/Scripts/#player-loses-a-fight-against-a-wild-fairy-executed-as-npc-script-5","text":"killPlayer exit","title":"Player loses a fight against a wild fairy (executed as NPC script 5)"},{"location":"internal/Scripts/#debug-script-to-test-fights-executed-as-npc-script-2","text":"enterWizform.0.1.1 //Viteria enterSpell.0.0.0 enterSpell.0.1.60 enterSpell.0.2.10 enterSpell.0.3.70 setNPCType.3 enterWizform.1.15.1 //Rasrow enterSpell.1.0.0 enterSpell.1.1.61 enterSpell.1.2.11 enterSpell.1.3.70 setNPCType.3 enterWizform.2.10.1 //Corgot enterSpell.2.0.0 enterSpell.2.1.62 enterSpell.2.2.12 enterSpell.2.3.72 setNPCType.3 enterWizform.3.57.1 //Tinefol enterSpell.3.0.0 enterSpell.3.1.63 enterSpell.3.2.13 enterSpell.3.3.73 setNPCType.3 enterWizform.4.4.1 //Gremor enterSpell.4.0.0 enterSpell.4.1.64 enterSpell.4.2.14 enterSpell.4.3.74 setNPCType.3 exit","title":"Debug script to test fights? (executed as NPC script 2)"},{"location":"internal/Scripts/#commands","text":"Char Max args Name Description ! 2 say triggers a dialog line C 1 setModel single arg is name of AED file \" 2 choice # 0 waitForUser $ 1 label single arg is numeric label identifier, used with goto command & 1 setCamera moves the camera % 0 exit stops script execution ' 3 wizform adds a fairy ( 3 spell adds a spell 8 0 else sometimes refered as \"item\" ) 2 changeWaypoint * 2 fight starts a duel + 2 lookAtPlayer , 1 changeDatabase - 0 removeNpc removes a NPC . 0 catchWizform 0 0 killPlayer 5 1 tradingCurrency 2 2 tradingItem 3 2 tradingSpell 4 2 tradingWizform 1 3 givePlayerCards B 3 setupGambling 6 3 ifPlayerHasCards @ 2 ifPlayerHasSpecials = 1 ifTriggerIsActive 9 3 removePlayerCards : 2 moveSystem ? 1 movementSpeed ; 2 modifyWizform < 1 lockUserInput > 3 modifyTrigger A 2 playAnimation D 1 ifIsWizform E 0 startPrelude F 0 npcWizFormEscapes G 1 dance H 2 setGlobal I 2 beginIf_global J 2 talk K 1 goto L 2 gotoRandomLabel M 3 ask N 3 chafferWizForms O 1 setNpcType P 2 deployNpcAtTrigger Q 1 delay R 2 gotoLabelByRandom S 1 ifCloseToWaypoint T 0 removeWizForms U 1 ifNpcModifierHasValue V 3 setNpcModifier W 3 defaultWizForm X 0 idle Y 1 ifPlayerIsClose Z 2 ifNumberOfNpcsIs [ 2 startEffect \\ 3 setTalkLabels ] 1 setCollision ^ 1 tradeWizform _ 3 createDynamicItems ` 1 playVideo a 1 removeNpcAtTrigger b 0 revive c 2 lookAtTrigger d 1 ifTriggerIsEnabled e 1 playSound f 2 playInArena g 1 startActorEffect h 0 endActorEffect i 1 createSceneObjects j 1 evolveWizForm k 1 removeBehavior l 2 unlockDoor m 0 endGame n 3 defaultDeck o 3 subGame p 3 modifyEffect q 2 playPlayerAnimation s 1 playAmyVoice r 3 createDynamicModel t 2 deploySound u 1 givePlayerPresent 7 0 endIf","title":"Commands"},{"location":"internal/Triggers/","text":"Trigger behaviors \u00b6 This page lists trigger types and describes them in a bit more detail. Doorway \u00b6 Doorway triggers have three parameters: The own doorway id The doorway id in the target scene The target scene id SingleplayerStartpoint \u00b6 The name of the SingleplayerStartpoint triggers are propably deprecated, as Doorway took their place. Nevertheless these triggers appear in each overworld scene and in many duel scenes. In duel scenes their meaning is yet to be known (propably identical to MultiplayerStartpoint ), in overworld scenes however describes this trigger where to place the Amy if she was teleported by the console. NpcAttackPosition \u00b6 This trigger is mostly used for wild fairies to attack the player, but it is also used for a friendly fairy warning about wild ones and an elf wanting a fight. These are the parameters: The NPC UID to use, often just the dummy UID for wild fairies. The actual scripts are generated on runtime . unknown parameter (either 0, 1, 2, 3 or 50), seems to describe the condition on which the trigger is enabled 0 or 2 uses the percentage in ii3 The chance percentage whether the fairy does actually attack An index to an internal list of fairies which may attack you at this specific position (see below). Idx Fairies 0 Worgot, Blumella 1 Corgot, Lana 2 Tinefol, Viteria, Silia 3 Pfoe, Tinefol 4 Abery, Corgot 5 Worgot, Abnobery 6 Abery, Silia 7 Cera 8 Goop, Cera 9 Goop, Tadana 10 2x Tadana, Amnis, Ceramnis 11 Vesbat 12 Jumjum, Vesbat 13 Gremor, Stobat 14 Grem, Jumjum 15 Mencre, Mensec 16 Mencre, Mentaur 17 Mencre, Mentaur 18 2x Beltaur, Mencre 19 Airia, Luria 20 Gorael, Sirael 21 Sirella, Sirael 22 Dracwin 23 2x Pix, Ferix 24 Feez, Greez 25 Greezloc, Glacess 26 Rasrow, Skelbo 27 Rasrow, Skelbo 28 Rasrow, Akritar, Manox 29 Manox, Turnox, Violectra 30 Minari 31 Minari 32 Minari, Megari, Violectra 33 2x Lighane, Driane, Darbue CameraPosition \u00b6 CameraPosition triggers are used to set the camera view via scripts. For this the setCamera command is used. The only parameter of this trigger is the Id of this CameraPosition. Waypoints \u00b6 There are two types of waypoints: regular waypoints and animal waypoints. As the name might tell, regular waypoints are used by NPCs while animal waypoints are used by animals. Waypoints are connected by a set of rules: * The trigger type is the same (no Waypoint is connected to an AnimalWaypoint) * Their group parameter ( ii2 ) is the same * Their distance from each other is at max 7 units The first parameter seems to be some kind of Id, most likely to be used in Scripts . The third parameter ( ii3 ) is not null if it is selected as a target for a NPC. Animal \u00b6 Animals are non-interactive creatures wandering around the world of ZanZarah. ii1 holds the animal type, while ii2 and ii3 are animal-specific parameters. See Animals for detailed information. Platform \u00b6 Platform is used by CreatePlatforms trigger to state where the platforms should appear and how they should move. As model there is always g_plt00h used, ii1 states the Behavior which is connected to the model. Value Behavior Description 0 MagicBridgeStatic as the name states, platforms with this Behavior do not move 1 MagicBridge0 unused 2 MagicBridge1 3 MagicBridge2 CreatePlatforms CreateItems \u00b6 These trigger create on player collision either platforms or items, their respective triggers ( Platform and Item ) describe the position. The effect used at trigger position is unknown yet, but for each platform/item the effect 4022 is used. If the game finds an EventCamera trigger, the view switches to it. The platforms/items appear after 1 second the player activated the trigger in a 0.3 second interval (so the first platform/item takes 1.3 seconds). The order they appear in is reverse to the order they are saved in the scene. Item \u00b6 Item is used by CreateItems trigger to state where and which items should appear. ii1 is the id of the item. For coins and crystals, the Behavior GenBehavior_EFF0 is used, for all other items GenBehavior .","title":"Trigger behaviors"},{"location":"internal/Triggers/#trigger-behaviors","text":"This page lists trigger types and describes them in a bit more detail.","title":"Trigger behaviors"},{"location":"internal/Triggers/#doorway","text":"Doorway triggers have three parameters: The own doorway id The doorway id in the target scene The target scene id","title":"Doorway"},{"location":"internal/Triggers/#singleplayerstartpoint","text":"The name of the SingleplayerStartpoint triggers are propably deprecated, as Doorway took their place. Nevertheless these triggers appear in each overworld scene and in many duel scenes. In duel scenes their meaning is yet to be known (propably identical to MultiplayerStartpoint ), in overworld scenes however describes this trigger where to place the Amy if she was teleported by the console.","title":"SingleplayerStartpoint"},{"location":"internal/Triggers/#npcattackposition","text":"This trigger is mostly used for wild fairies to attack the player, but it is also used for a friendly fairy warning about wild ones and an elf wanting a fight. These are the parameters: The NPC UID to use, often just the dummy UID for wild fairies. The actual scripts are generated on runtime . unknown parameter (either 0, 1, 2, 3 or 50), seems to describe the condition on which the trigger is enabled 0 or 2 uses the percentage in ii3 The chance percentage whether the fairy does actually attack An index to an internal list of fairies which may attack you at this specific position (see below). Idx Fairies 0 Worgot, Blumella 1 Corgot, Lana 2 Tinefol, Viteria, Silia 3 Pfoe, Tinefol 4 Abery, Corgot 5 Worgot, Abnobery 6 Abery, Silia 7 Cera 8 Goop, Cera 9 Goop, Tadana 10 2x Tadana, Amnis, Ceramnis 11 Vesbat 12 Jumjum, Vesbat 13 Gremor, Stobat 14 Grem, Jumjum 15 Mencre, Mensec 16 Mencre, Mentaur 17 Mencre, Mentaur 18 2x Beltaur, Mencre 19 Airia, Luria 20 Gorael, Sirael 21 Sirella, Sirael 22 Dracwin 23 2x Pix, Ferix 24 Feez, Greez 25 Greezloc, Glacess 26 Rasrow, Skelbo 27 Rasrow, Skelbo 28 Rasrow, Akritar, Manox 29 Manox, Turnox, Violectra 30 Minari 31 Minari 32 Minari, Megari, Violectra 33 2x Lighane, Driane, Darbue","title":"NpcAttackPosition"},{"location":"internal/Triggers/#cameraposition","text":"CameraPosition triggers are used to set the camera view via scripts. For this the setCamera command is used. The only parameter of this trigger is the Id of this CameraPosition.","title":"CameraPosition"},{"location":"internal/Triggers/#waypoints","text":"There are two types of waypoints: regular waypoints and animal waypoints. As the name might tell, regular waypoints are used by NPCs while animal waypoints are used by animals. Waypoints are connected by a set of rules: * The trigger type is the same (no Waypoint is connected to an AnimalWaypoint) * Their group parameter ( ii2 ) is the same * Their distance from each other is at max 7 units The first parameter seems to be some kind of Id, most likely to be used in Scripts . The third parameter ( ii3 ) is not null if it is selected as a target for a NPC.","title":"Waypoints"},{"location":"internal/Triggers/#animal","text":"Animals are non-interactive creatures wandering around the world of ZanZarah. ii1 holds the animal type, while ii2 and ii3 are animal-specific parameters. See Animals for detailed information.","title":"Animal"},{"location":"internal/Triggers/#platform","text":"Platform is used by CreatePlatforms trigger to state where the platforms should appear and how they should move. As model there is always g_plt00h used, ii1 states the Behavior which is connected to the model. Value Behavior Description 0 MagicBridgeStatic as the name states, platforms with this Behavior do not move 1 MagicBridge0 unused 2 MagicBridge1 3 MagicBridge2","title":"Platform"},{"location":"internal/Triggers/#createplatforms-createitems","text":"These trigger create on player collision either platforms or items, their respective triggers ( Platform and Item ) describe the position. The effect used at trigger position is unknown yet, but for each platform/item the effect 4022 is used. If the game finds an EventCamera trigger, the view switches to it. The platforms/items appear after 1 second the player activated the trigger in a 0.3 second interval (so the first platform/item takes 1.3 seconds). The order they appear in is reverse to the order they are saved in the scene.","title":"CreatePlatforms CreateItems"},{"location":"internal/Triggers/#item","text":"Item is used by CreateItems trigger to state where and which items should appear. ii1 is the id of the item. For coins and crystals, the Behavior GenBehavior_EFF0 is used, for all other items GenBehavior .","title":"Item"},{"location":"internal/ZZVersion/","text":"ZZVersion \u00b6 There exists a common structure for versions in Zanzarah, used internally in the executable, in scenes and savefiles. Format \u00b6 Size Type Description zstring The name of the author 4B enum The country in which the game version was released (see countries ) 4B enum The type of release (see build types ) 4B uint unknown 4B uint The build versions, it seems like build versions shall be incompatbible to each other 4B zstring A formatted date string at which the file was built 4B zstring A formatted time string at which the file was built 4B uint The year at which the file was built 4B uint unknown Build Countries \u00b6 Value Description 0 Germany 1 English 2 France 3 Spain 4 Italy 5 Japanese 6 English6 8 Russia Build Types \u00b6 Value Description 0 Debug 1 Release 2 WebDemo 3 CdDemo","title":"ZZVersion"},{"location":"internal/ZZVersion/#zzversion","text":"There exists a common structure for versions in Zanzarah, used internally in the executable, in scenes and savefiles.","title":"ZZVersion"},{"location":"internal/ZZVersion/#format","text":"Size Type Description zstring The name of the author 4B enum The country in which the game version was released (see countries ) 4B enum The type of release (see build types ) 4B uint unknown 4B uint The build versions, it seems like build versions shall be incompatbible to each other 4B zstring A formatted date string at which the file was built 4B zstring A formatted time string at which the file was built 4B uint The year at which the file was built 4B uint unknown","title":"Format"},{"location":"internal/ZZVersion/#build-countries","text":"Value Description 0 Germany 1 English 2 France 3 Spain 4 Italy 5 Japanese 6 English6 8 Russia","title":"Build Countries"},{"location":"internal/ZZVersion/#build-types","text":"Value Description 0 Debug 1 Release 2 WebDemo 3 CdDemo","title":"Build Types"},{"location":"internal/randomFairySelection/","text":"Random Fairy Selection \u00b6 There are two situations in the game where random fairies is chosen: for wild fairy encounters and for certain NPC's. Of course there is a strict set of rules as to still ensure a balanced games. Fairy groups \u00b6 There are 33 sets of fairies which are identified by their index number. This id is used for the script command W ( defaultWizform ) and can also be found as second parameter of the NpcAttackPosition triggers. The group also defines the level range (with the LevelRangeId ) the fairies can spawn at. These are the groups (if a fairy is listed twice, it is twice as likely to spawn): GroupId FairyId FairyName LRId LevelRange 0 9 Worgot 5 3-3 26 Blumella 1 10 Corgot 13 9-11 75 Lana 2 57 Tinefol 36 26-34 1 Viteria 0 Silia 3 50 Pfoe 24 17-22 57 Tinefol 4 18 Abery 13 9-11 10 Corgot 5 9 Worgot 24 17-22 19 Abnobery 6 18 Abery 24 17-22 0 Silia 7 23 Cera 13 9-11 8 64 Goop 24 17-22 23 Cera 9 64 Goop 36 26-34 6 Tadana 10 6 Tadana 42 31-40 6 Tadana 24 Amnis 25 Ceramnis 11 20 Vesbat 5 3-3 20 Vesbat 12 62 Jumjum 13 9-11 20 Vesbat 13 4 Gremor 24 17-22 21 Stobat 14 3 Boneria 42 31-40 62 Jumjum 15 27 Mencre 13 9-11 28 Mensec 16 27 Mencre 24 17-22 47 Mentaur 17 27 Mencre 36 26-34 47 Mentaur 18 46 Beltaur 42 31-40 46 Beltaur 27 Mencre 19 12 Airia 36 26-34 13 Luria 20 41 Gorael 36 26-34 40 Sirael 21 54 Sirella 42 31-40 40 Sirael 22 55 Dracwin 42 31-40 55 Dracwin 23 31 Pix 54 40-52 31 Pix 32 Ferix 24 34 Feez 36 26-34 35 Greez 25 36 Greezloc 42 31-40 52 Glacess 26 15 Rasrow 24 17-22 37 Skelbo 27 15 Rasrow 36 26-34 37 Skelbo 28 15 Rasrow 42 31-40 53 Akrita 69 Manox 29 69 Manox 54 40-52 70 Turnox 29 Violectra 30 65 Minari 36 26-34 31 65 Minari 42 31-40 32 65 Minari 54 40-52 66 Megari 29 Violectra 33 72 Lighane 54 40-52 72 Lighane 73 Driane 43 Darbue Spells \u00b6 For selecting the spells a fairies gets, the game first determines the maximum spell cost for attack and support based on a level rank. Then it gets all spells of the same element type (ignoring the fairy's capabilities) and chooses at random. Level Rank \u00b6 The level rank is calculated with an integer division (always round down) by 5 , so examples: - Level = 4 | Rank = 4 / 5 = 0 - Level = 9 | Rank = 9 / 5 = 1 - Level = 10 | Rank = 10 / 5 = 2 Then the maximum costs can be figured out by this table: Rank Maximum Attack Cost Maximum Support Cost 0 1 n/a 1 1 n/a 2 1 1 3 2 1 4 2 2 5 2 2 6 3 2 7+ 3 3 LevelRangeId \u00b6 The level selection based on the LevelRangeId follows this pseudocode: int ampl = levelRangeId / 4; int base = levelRangeId - ampl - 1; int newLevel = base + rand() % ampl;","title":"Random Fairy Selection"},{"location":"internal/randomFairySelection/#random-fairy-selection","text":"There are two situations in the game where random fairies is chosen: for wild fairy encounters and for certain NPC's. Of course there is a strict set of rules as to still ensure a balanced games.","title":"Random Fairy Selection"},{"location":"internal/randomFairySelection/#fairy-groups","text":"There are 33 sets of fairies which are identified by their index number. This id is used for the script command W ( defaultWizform ) and can also be found as second parameter of the NpcAttackPosition triggers. The group also defines the level range (with the LevelRangeId ) the fairies can spawn at. These are the groups (if a fairy is listed twice, it is twice as likely to spawn): GroupId FairyId FairyName LRId LevelRange 0 9 Worgot 5 3-3 26 Blumella 1 10 Corgot 13 9-11 75 Lana 2 57 Tinefol 36 26-34 1 Viteria 0 Silia 3 50 Pfoe 24 17-22 57 Tinefol 4 18 Abery 13 9-11 10 Corgot 5 9 Worgot 24 17-22 19 Abnobery 6 18 Abery 24 17-22 0 Silia 7 23 Cera 13 9-11 8 64 Goop 24 17-22 23 Cera 9 64 Goop 36 26-34 6 Tadana 10 6 Tadana 42 31-40 6 Tadana 24 Amnis 25 Ceramnis 11 20 Vesbat 5 3-3 20 Vesbat 12 62 Jumjum 13 9-11 20 Vesbat 13 4 Gremor 24 17-22 21 Stobat 14 3 Boneria 42 31-40 62 Jumjum 15 27 Mencre 13 9-11 28 Mensec 16 27 Mencre 24 17-22 47 Mentaur 17 27 Mencre 36 26-34 47 Mentaur 18 46 Beltaur 42 31-40 46 Beltaur 27 Mencre 19 12 Airia 36 26-34 13 Luria 20 41 Gorael 36 26-34 40 Sirael 21 54 Sirella 42 31-40 40 Sirael 22 55 Dracwin 42 31-40 55 Dracwin 23 31 Pix 54 40-52 31 Pix 32 Ferix 24 34 Feez 36 26-34 35 Greez 25 36 Greezloc 42 31-40 52 Glacess 26 15 Rasrow 24 17-22 37 Skelbo 27 15 Rasrow 36 26-34 37 Skelbo 28 15 Rasrow 42 31-40 53 Akrita 69 Manox 29 69 Manox 54 40-52 70 Turnox 29 Violectra 30 65 Minari 36 26-34 31 65 Minari 42 31-40 32 65 Minari 54 40-52 66 Megari 29 Violectra 33 72 Lighane 54 40-52 72 Lighane 73 Driane 43 Darbue","title":"Fairy groups"},{"location":"internal/randomFairySelection/#spells","text":"For selecting the spells a fairies gets, the game first determines the maximum spell cost for attack and support based on a level rank. Then it gets all spells of the same element type (ignoring the fairy's capabilities) and chooses at random.","title":"Spells"},{"location":"internal/randomFairySelection/#level-rank","text":"The level rank is calculated with an integer division (always round down) by 5 , so examples: - Level = 4 | Rank = 4 / 5 = 0 - Level = 9 | Rank = 9 / 5 = 1 - Level = 10 | Rank = 10 / 5 = 2 Then the maximum costs can be figured out by this table: Rank Maximum Attack Cost Maximum Support Cost 0 1 n/a 1 1 n/a 2 1 1 3 2 1 4 2 2 5 2 2 6 3 2 7+ 3 3","title":"Level Rank"},{"location":"internal/randomFairySelection/#levelrangeid","text":"The level selection based on the LevelRangeId follows this pseudocode: int ampl = levelRangeId / 4; int base = levelRangeId - ampl - 1; int newLevel = base + rand() % ampl;","title":"LevelRangeId"},{"location":"internal/script%20commands/fight/","text":"fight \u00b6 fight takes two numeric parameters and starts a duel. The parameters determine the arena the duel will take place in and whether the fight is against a single or multiple enemies. It can only be triggered as part of a dialog interaction. Its parameters are: The scene ID of the arena or -1 (see below) 0 for single enemy, 1 for multiple enemies Its short form is * Multiple enemies \u00b6 When the duel spans multiple enemies the enemies are chosen based on: They have to be NPCs They have to have at least one fairy They are at most 11 units away from the primary NPC Choosing the arena \u00b6 The scene ID of the arena can be chosen directly, if however it is -1 it is chosen semi-randomly based on the level of the first fairy of the primary NPC and whether the fight is against multiple enemies. Level-Range IDs for single enemy IDs for multiple enemies 0-25 220 1020 223 1023 229 1029 26-40 221 1021 224 1024 226 1026 230 1030 41-... 222 1022 225 1025 227 1027 228 1028","title":"fight"},{"location":"internal/script%20commands/fight/#fight","text":"fight takes two numeric parameters and starts a duel. The parameters determine the arena the duel will take place in and whether the fight is against a single or multiple enemies. It can only be triggered as part of a dialog interaction. Its parameters are: The scene ID of the arena or -1 (see below) 0 for single enemy, 1 for multiple enemies Its short form is *","title":"fight"},{"location":"internal/script%20commands/fight/#multiple-enemies","text":"When the duel spans multiple enemies the enemies are chosen based on: They have to be NPCs They have to have at least one fairy They are at most 11 units away from the primary NPC","title":"Multiple enemies"},{"location":"internal/script%20commands/fight/#choosing-the-arena","text":"The scene ID of the arena can be chosen directly, if however it is -1 it is chosen semi-randomly based on the level of the first fairy of the primary NPC and whether the fight is against multiple enemies. Level-Range IDs for single enemy IDs for multiple enemies 0-25 220 1020 223 1023 229 1029 26-40 221 1021 224 1024 226 1026 230 1030 41-... 222 1022 225 1025 227 1027 228 1028","title":"Choosing the arena"},{"location":"internal/script%20commands/removeNpc/","text":"removeNpc \u00b6 The script command removeNpc takes no parameter, its short form is - . It adds a new GSModDisableTrigger to the scene to persist the removing and then removes itselfs from the world. As it can be executed in implementation 1 as well as 3 it may also close the current dialog.","title":"removeNpc"},{"location":"internal/script%20commands/removeNpc/#removenpc","text":"The script command removeNpc takes no parameter, its short form is - . It adds a new GSModDisableTrigger to the scene to persist the removing and then removes itselfs from the world. As it can be executed in implementation 1 as well as 3 it may also close the current dialog.","title":"removeNpc"},{"location":"internal/script%20commands/say/","text":"say \u00b6 The script command say is allowed when triggering NPCs and takes two parameters: A foreign key to a dialog row A numeric flag I call silent When executed the text in the dialog row is displayed gradually at the bottom of the screen in a letterbox. The silent flag does two things: blinking symbol appears after the text has been displayed fully a voice sample is played The voice sample may come from the Voice column in the dialog row , but it isn't used in the original database. Alternatively the game appends at random a number between 1 and 3 to the model name and plays thereby choosen sample. Its short form is ! .","title":"say"},{"location":"internal/script%20commands/say/#say","text":"The script command say is allowed when triggering NPCs and takes two parameters: A foreign key to a dialog row A numeric flag I call silent When executed the text in the dialog row is displayed gradually at the bottom of the screen in a letterbox. The silent flag does two things: blinking symbol appears after the text has been displayed fully a voice sample is played The voice sample may come from the Voice column in the dialog row , but it isn't used in the original database. Alternatively the game appends at random a number between 1 and 3 to the model name and plays thereby choosen sample. Its short form is ! .","title":"say"},{"location":"internal/script%20commands/setCamera/","text":"setCamera \u00b6 setCamera takes only a single numeric parameter, which determines where the camera should be located. As this command is only allowed for scriptsystem implementation 1 and 3, therefore there is always a Npc to reference. Its single-character version is & Value Description 00XX at CameraPosition trigger XX (look at player) 1000 behind player (left top) 1001 behind player (left bottom) 1002 behind player (left center) 1003 behind player (right top) 1004 behind player (right bottom) 1005 behind player (right center) 1006 behind player (directly) 1007 front of player (directly) 2000 behind Npc (left top) 2001 behind Npc (left bottom) 2002 behind Npc (left center) 2003 behind Npc (right top) 2004 behind Npc (right bottom) 2005 behind Npc (right center) 2100 follow Npc 30XX at CameraPosition trigger XX (use trigger direction) 4000 look at Npc 50XX at CameraPosition trigger XX (look at Npc)","title":"setCamera"},{"location":"internal/script%20commands/setCamera/#setcamera","text":"setCamera takes only a single numeric parameter, which determines where the camera should be located. As this command is only allowed for scriptsystem implementation 1 and 3, therefore there is always a Npc to reference. Its single-character version is & Value Description 00XX at CameraPosition trigger XX (look at player) 1000 behind player (left top) 1001 behind player (left bottom) 1002 behind player (left center) 1003 behind player (right top) 1004 behind player (right bottom) 1005 behind player (right center) 1006 behind player (directly) 1007 front of player (directly) 2000 behind Npc (left top) 2001 behind Npc (left bottom) 2002 behind Npc (left center) 2003 behind Npc (right top) 2004 behind Npc (right bottom) 2005 behind Npc (right center) 2100 follow Npc 30XX at CameraPosition trigger XX (use trigger direction) 4000 look at Npc 50XX at CameraPosition trigger XX (look at Npc)","title":"setCamera"},{"location":"internal/script%20commands/spell/","text":"spell \u00b6 spell take three numeric parameters, adds a spell to the inventory and assigns the spell to a specific spell slot of a fairy in the deck. It can only be used with NPCs. Its parameters are: The deck slot of the fairy (0-4 incl.) The spell slot (0-3 incl.) The ID of the spell Keep in mind that this does not check for active/passive spells, you should only put active spells into slots 0 and 2 and only put passive spells into slots 1 and 3! Its short form is (","title":"spell"},{"location":"internal/script%20commands/spell/#spell","text":"spell take three numeric parameters, adds a spell to the inventory and assigns the spell to a specific spell slot of a fairy in the deck. It can only be used with NPCs. Its parameters are: The deck slot of the fairy (0-4 incl.) The spell slot (0-3 incl.) The ID of the spell Keep in mind that this does not check for active/passive spells, you should only put active spells into slots 0 and 2 and only put passive spells into slots 1 and 3! Its short form is (","title":"spell"},{"location":"internal/script%20commands/wizform/","text":"wizform \u00b6 wizform takes three numeric parameter, adds a fairy at a specific level into the inventory and sets the fairy into a slot in the deck. It can only be used with NPCs. The parameters are: The slot were the new fairy is put (0-4 incl.) The ID of the new fairy The level of the new fairy Its short form is '","title":"wizform"},{"location":"internal/script%20commands/wizform/#wizform","text":"wizform takes three numeric parameter, adds a fairy at a specific level into the inventory and sets the fairy into a slot in the deck. It can only be used with NPCs. The parameters are: The slot were the new fairy is put (0-4 incl.) The ID of the new fairy The level of the new fairy Its short form is '","title":"wizform"},{"location":"resources/","text":"File format summary \u00b6 As one can imagine, ZanZarah uses many different file formats for its resources. This file should give an overview and link to a detail page for them all. RWBS \u00b6 Renderware Binary Stream files are not really actual files, but rather a general format structure which is use by DFF as well as BSP to store hierachical data. As the name states, this format was developed by Criterion Software for Renderware. DFF \u00b6 DFF files are used to store meshes and are generally structured by the RWBS system. They contain geometry, materials, collision data, skinning and bone data. They do not contain most of the animation data and no texture data. This format was developed by Criterion Software for Renderware. BSP \u00b6 BSP (Binary Space Partition) are used to store different world geometry and collision data. They use the RWBS format. Like DFF files they do not contain texture data. This format was developed by Criterion Software for Renderware. SKA \u00b6 SKA (Skeletal Animation) files are used to store model animations. This format was like the RWBS file formats developed by Criterion Software for Renderware but they do not follow the RWBS file structure. ED \u00b6 ED (Effect description) files are used to describe various effects. This format was developed by Funatics Entertainment for ZanZarah. FBS \u00b6 FBS files are used to store various numeric and/or textual data about various aspects of the gameplay. They store information about the texts displayed in the game, fairy, spell, item and NPC information. They are the biggest source for Scripts . This format was developed by Funatics Entertainment for ZanZarah. AED \u00b6 AED (actorex description) files are used to combine the body mesh files with the wing mesh files and the animation files for both of them. The format was developed by Funatics Entertainment for ZanZarah. SCN \u00b6 SCN (scene) files are used to describe a scene. This does include a reference to the BSP file but also contains various other informations like models placed in the world, triggers, sound or graphical effects, etc. DAT \u00b6 DAT (data) files are used to store a state of the game, so the player does not have to play all over again. Shocking, isn't it? CFG \u00b6 Unfortunately there exists three different CFG formats which all are incompatible to each other: Link Files Description [x] Configs/game.cfg This file stores the game settings including input bindings [x] System/map.cfg This file stores various map markers [x] System/ai.cfg System/net.cfg System/wizform.cfg These files store numeric variables, propably used to test and tweak the game during development RAW \u00b6 There exists only one file with the extension RAW, it stores which pixel of the map texture correspond to the different world sections.","title":"File format summary"},{"location":"resources/#file-format-summary","text":"As one can imagine, ZanZarah uses many different file formats for its resources. This file should give an overview and link to a detail page for them all.","title":"File format summary"},{"location":"resources/#rwbs","text":"Renderware Binary Stream files are not really actual files, but rather a general format structure which is use by DFF as well as BSP to store hierachical data. As the name states, this format was developed by Criterion Software for Renderware.","title":"RWBS"},{"location":"resources/#dff","text":"DFF files are used to store meshes and are generally structured by the RWBS system. They contain geometry, materials, collision data, skinning and bone data. They do not contain most of the animation data and no texture data. This format was developed by Criterion Software for Renderware.","title":"DFF"},{"location":"resources/#bsp","text":"BSP (Binary Space Partition) are used to store different world geometry and collision data. They use the RWBS format. Like DFF files they do not contain texture data. This format was developed by Criterion Software for Renderware.","title":"BSP"},{"location":"resources/#ska","text":"SKA (Skeletal Animation) files are used to store model animations. This format was like the RWBS file formats developed by Criterion Software for Renderware but they do not follow the RWBS file structure.","title":"SKA"},{"location":"resources/#ed","text":"ED (Effect description) files are used to describe various effects. This format was developed by Funatics Entertainment for ZanZarah.","title":"ED"},{"location":"resources/#fbs","text":"FBS files are used to store various numeric and/or textual data about various aspects of the gameplay. They store information about the texts displayed in the game, fairy, spell, item and NPC information. They are the biggest source for Scripts . This format was developed by Funatics Entertainment for ZanZarah.","title":"FBS"},{"location":"resources/#aed","text":"AED (actorex description) files are used to combine the body mesh files with the wing mesh files and the animation files for both of them. The format was developed by Funatics Entertainment for ZanZarah.","title":"AED"},{"location":"resources/#scn","text":"SCN (scene) files are used to describe a scene. This does include a reference to the BSP file but also contains various other informations like models placed in the world, triggers, sound or graphical effects, etc.","title":"SCN"},{"location":"resources/#dat","text":"DAT (data) files are used to store a state of the game, so the player does not have to play all over again. Shocking, isn't it?","title":"DAT"},{"location":"resources/#cfg","text":"Unfortunately there exists three different CFG formats which all are incompatible to each other: Link Files Description [x] Configs/game.cfg This file stores the game settings including input bindings [x] System/map.cfg This file stores various map markers [x] System/ai.cfg System/net.cfg System/wizform.cfg These files store numeric variables, propably used to test and tweak the game during development","title":"CFG"},{"location":"resources/#raw","text":"There exists only one file with the extension RAW, it stores which pixel of the map texture correspond to the different world sections.","title":"RAW"},{"location":"resources/AED/","text":"AED \u00b6 ActorEx Description (AED) files are in Zanzarah mappings between body model, optional wings model and a set of animations per part. It is developed by Funatics, seen by the similar format for scene files . Data Format \u00b6 The first zstring in an AED file is [ActorExDescriptionFile] After this there is a sequence of sections all started by a zstring containing the name in square brackets. Each section has his own data format. The end of the file is signaled by the section header [EOS] which does not have any other information. Sections \u00b6 SectionName Dataformat Description ModelFilename_Body zstring The DFF file for the body AnimationPoolID_Body int32 An unused ID for the animation pool AnimationFilename_Body zstring + enum A SKA in the body animation pool and its AnimationType ModelFilename_Wings zstring The DFF file for the (optional) wings AnimationPoolID_Wings int32 An unused ID for the animation pool AnimationFilename_Wings zstring + enum A SKA in the wings animation pool and its AnimationType AttachWingsToBone int32 The bone ID of the body to attach the wings root bone to HeadBoneID int32 The root head bone ID, usage yet to be known EffectBoneID int32 The bone ID to attach a possible actor effect to AnimationType \u00b6 Value Name 0 Idle0 1 Jump 2 Run 3 RunForwardLeft 4 RunForwardRight 5 Back 6 Dance 7 Fall 8 Rotate 9 Right 10 Left 11 Idle1 12 Idle2 13 Talk0 14 Talk1 15 Talk2 16 Talk3 17 Walk0 18 Walk1 19 Walk2 20 SpecialIdle0 21 SpecialIdle1 22 SpecialIdle2 23 FlyForward 24 FlyBack 25 FlyLeft 26 FlyRight 27 Loadup 28 Hit 29 Joy 30 ThudGround 31 UseFairyPipe 32 UseSeaShel 33 Smith 34 Astonished 35 Surprise0 36 Surprise1 37 Stop 38 ThudGround2 39 PixieFlounder 40 JumpHigh","title":"AED"},{"location":"resources/AED/#aed","text":"ActorEx Description (AED) files are in Zanzarah mappings between body model, optional wings model and a set of animations per part. It is developed by Funatics, seen by the similar format for scene files .","title":"AED"},{"location":"resources/AED/#data-format","text":"The first zstring in an AED file is [ActorExDescriptionFile] After this there is a sequence of sections all started by a zstring containing the name in square brackets. Each section has his own data format. The end of the file is signaled by the section header [EOS] which does not have any other information.","title":"Data Format"},{"location":"resources/AED/#sections","text":"SectionName Dataformat Description ModelFilename_Body zstring The DFF file for the body AnimationPoolID_Body int32 An unused ID for the animation pool AnimationFilename_Body zstring + enum A SKA in the body animation pool and its AnimationType ModelFilename_Wings zstring The DFF file for the (optional) wings AnimationPoolID_Wings int32 An unused ID for the animation pool AnimationFilename_Wings zstring + enum A SKA in the wings animation pool and its AnimationType AttachWingsToBone int32 The bone ID of the body to attach the wings root bone to HeadBoneID int32 The root head bone ID, usage yet to be known EffectBoneID int32 The bone ID to attach a possible actor effect to","title":"Sections"},{"location":"resources/AED/#animationtype","text":"Value Name 0 Idle0 1 Jump 2 Run 3 RunForwardLeft 4 RunForwardRight 5 Back 6 Dance 7 Fall 8 Rotate 9 Right 10 Left 11 Idle1 12 Idle2 13 Talk0 14 Talk1 15 Talk2 16 Talk3 17 Walk0 18 Walk1 19 Walk2 20 SpecialIdle0 21 SpecialIdle1 22 SpecialIdle2 23 FlyForward 24 FlyBack 25 FlyLeft 26 FlyRight 27 Loadup 28 Hit 29 Joy 30 ThudGround 31 UseFairyPipe 32 UseSeaShel 33 Smith 34 Astonished 35 Surprise0 36 Surprise1 37 Stop 38 ThudGround2 39 PixieFlounder 40 JumpHigh","title":"AnimationType"},{"location":"resources/BSP/","text":"BSP \u00b6 Binary Space Partition files are used to store information about scene geometry, their materials and the respective collision data. Therefore the file inherits a recursive structure which is encoded using the RWBS format. Data format \u00b6 Please see the RWBS articles. Common RWBS structure \u00b6 1 World 1 MaterialList 1-N Material 1 Texture 1 PlaneSection or AtomicSection 2 PlaneSection or AtomicSection for AtomicSection 1 Extension 1 BinMeshPLG 1 CollisionPLG","title":"BSP"},{"location":"resources/BSP/#bsp","text":"Binary Space Partition files are used to store information about scene geometry, their materials and the respective collision data. Therefore the file inherits a recursive structure which is encoded using the RWBS format.","title":"BSP"},{"location":"resources/BSP/#data-format","text":"Please see the RWBS articles.","title":"Data format"},{"location":"resources/BSP/#common-rwbs-structure","text":"1 World 1 MaterialList 1-N Material 1 Texture 1 PlaneSection or AtomicSection 2 PlaneSection or AtomicSection for AtomicSection 1 Extension 1 BinMeshPLG 1 CollisionPLG","title":"Common RWBS structure"},{"location":"resources/DAT/","text":"DAT \u00b6 Savegames stored in DAT files consist of various sections. The main parts of it are the GameState and the Inventory. Also the GlobalVars are saved here. Data format \u00b6 Size Type Section Description ZZVersion Header This version has to be compatible with the internal savegame ZZVersion structure zstring Header The players name 4B uint Location The structure size of the location block (always 8) 4B uint Location Scene ID 4B uint Location Entrance Trigger ID 4B uint GameState Count of scenes for which are GameState Modifier saved GameStateScene[] GameState The scene data 4B uint Inventory The count of cards in the players inventory InventoryCard[] Inventory The inventory card data 4B uint PixieCount The current amount of pixies hold on by the player 4B uint PixieCount The total amount of pixies catched by the player 4B uint GlobalVars The count of global variables (always 49) GlobalVar[] GlobalVars The global variables 4B uint SwitchGameMinTries The minimal count of tries for the switch game GameStateScene \u00b6 Size Type Description zstring The scene name 4B uint The GameState modifier count for this scene GameStateMod [] The GameState modifiers GameStateMod \u00b6 Size Type Description 4B enum The type of the GameStateMod (see GameStateModType ) GameStateModType specific data GameStateModType \u00b6 Value Description 0 DisableAttackTrigger 1 RemoveItem 2 ChangeNpcState 3 DisableTrigger 4 RemoveSimpleModel 5 SetTrigger 6 SetNpcModifier GSModDisableAttackTrigger \u00b6 Size Type Description 4B uint triggerId GSModRemoveItem \u00b6 Size Type Description 4B uint modelId GSModChangeNpcState \u00b6 Size Type Description 4B uint triggerId 4B uint databaseId - The fb0x05 UID of the NPC to change into GSModDisableTrigger \u00b6 Size Type Description 4B uint triggerId GSModRemoveSimpleModel \u00b6 Size Type Description 4B uint modelId GSModSetTrigger \u00b6 Size Type Description 4B uint triggerId 4B uint ii1 - The trigger parameters 4B uint ii2 - If one of these are -1 4B uint ii3 - this said parameter is not set 4B uint ii4 GSModSetNpcModifier \u00b6 Size Type Description 4B uint triggerId 4B uint value - Actually just sets the triggers ii2 param InventoryCard \u00b6 Size Type Description 4B CardId The CardId, thus also encodes the type 4B uint atIdx - The index at which Zanzarah puts this card in the internal inventory list 4B uint dbUID - The database ID (so either fb0x01 , fb0x03 or fb0x04 ) of the card 4B uint amount 1B bool isUsed InventoryCard-specific data InventoryItem \u00b6 Items do not have any extra information InventorySlot \u00b6 Size Type Description 4B uint usageCount - How many times this spell was used 4B uint curMana InventoryFairy \u00b6 Size Type Description 4B uint changeCountLevel - How many times this fairy leveled up 4B uint level 4B uint unknown 4B uint unknown 4B uint changeCountXP - How many times this fairy got XP 4B uint curXP 12B SpellReq [4] The current spell requirements 16B uint[4] The spell indices (in the inventory of the player) 4B uint The slot index in the players deck 4B uint statusEffect 20B uint[5] unknown 4B uint Current health points zstring name SpellReq \u00b6 Size Type Description 1B enum class1 - (see Classes ) 1B enum class2 - (see Classes ) 1B enum class3 - (see Classes )","title":"DAT"},{"location":"resources/DAT/#dat","text":"Savegames stored in DAT files consist of various sections. The main parts of it are the GameState and the Inventory. Also the GlobalVars are saved here.","title":"DAT"},{"location":"resources/DAT/#data-format","text":"Size Type Section Description ZZVersion Header This version has to be compatible with the internal savegame ZZVersion structure zstring Header The players name 4B uint Location The structure size of the location block (always 8) 4B uint Location Scene ID 4B uint Location Entrance Trigger ID 4B uint GameState Count of scenes for which are GameState Modifier saved GameStateScene[] GameState The scene data 4B uint Inventory The count of cards in the players inventory InventoryCard[] Inventory The inventory card data 4B uint PixieCount The current amount of pixies hold on by the player 4B uint PixieCount The total amount of pixies catched by the player 4B uint GlobalVars The count of global variables (always 49) GlobalVar[] GlobalVars The global variables 4B uint SwitchGameMinTries The minimal count of tries for the switch game","title":"Data format"},{"location":"resources/DAT/#gamestatescene","text":"Size Type Description zstring The scene name 4B uint The GameState modifier count for this scene GameStateMod [] The GameState modifiers","title":"GameStateScene"},{"location":"resources/DAT/#gamestatemod","text":"Size Type Description 4B enum The type of the GameStateMod (see GameStateModType ) GameStateModType specific data","title":"GameStateMod"},{"location":"resources/DAT/#gamestatemodtype","text":"Value Description 0 DisableAttackTrigger 1 RemoveItem 2 ChangeNpcState 3 DisableTrigger 4 RemoveSimpleModel 5 SetTrigger 6 SetNpcModifier","title":"GameStateModType"},{"location":"resources/DAT/#gsmoddisableattacktrigger","text":"Size Type Description 4B uint triggerId","title":"GSModDisableAttackTrigger"},{"location":"resources/DAT/#gsmodremoveitem","text":"Size Type Description 4B uint modelId","title":"GSModRemoveItem"},{"location":"resources/DAT/#gsmodchangenpcstate","text":"Size Type Description 4B uint triggerId 4B uint databaseId - The fb0x05 UID of the NPC to change into","title":"GSModChangeNpcState"},{"location":"resources/DAT/#gsmoddisabletrigger","text":"Size Type Description 4B uint triggerId","title":"GSModDisableTrigger"},{"location":"resources/DAT/#gsmodremovesimplemodel","text":"Size Type Description 4B uint modelId","title":"GSModRemoveSimpleModel"},{"location":"resources/DAT/#gsmodsettrigger","text":"Size Type Description 4B uint triggerId 4B uint ii1 - The trigger parameters 4B uint ii2 - If one of these are -1 4B uint ii3 - this said parameter is not set 4B uint ii4","title":"GSModSetTrigger"},{"location":"resources/DAT/#gsmodsetnpcmodifier","text":"Size Type Description 4B uint triggerId 4B uint value - Actually just sets the triggers ii2 param","title":"GSModSetNpcModifier"},{"location":"resources/DAT/#inventorycard","text":"Size Type Description 4B CardId The CardId, thus also encodes the type 4B uint atIdx - The index at which Zanzarah puts this card in the internal inventory list 4B uint dbUID - The database ID (so either fb0x01 , fb0x03 or fb0x04 ) of the card 4B uint amount 1B bool isUsed InventoryCard-specific data","title":"InventoryCard"},{"location":"resources/DAT/#inventoryitem","text":"Items do not have any extra information","title":"InventoryItem"},{"location":"resources/DAT/#inventoryslot","text":"Size Type Description 4B uint usageCount - How many times this spell was used 4B uint curMana","title":"InventorySlot"},{"location":"resources/DAT/#inventoryfairy","text":"Size Type Description 4B uint changeCountLevel - How many times this fairy leveled up 4B uint level 4B uint unknown 4B uint unknown 4B uint changeCountXP - How many times this fairy got XP 4B uint curXP 12B SpellReq [4] The current spell requirements 16B uint[4] The spell indices (in the inventory of the player) 4B uint The slot index in the players deck 4B uint statusEffect 20B uint[5] unknown 4B uint Current health points zstring name","title":"InventoryFairy"},{"location":"resources/DAT/#spellreq","text":"Size Type Description 1B enum class1 - (see Classes ) 1B enum class2 - (see Classes ) 1B enum class3 - (see Classes )","title":"SpellReq"},{"location":"resources/DFF/","text":"DFF \u00b6 DFF files are used to store information about models, static or actors. Therefore they not only contain geometry and material information but also information about animations, bones and skinning. They are structured in the RWBS format. Data format \u00b6 Please see the RWBS articles. Common structure \u00b6 1 Clump 1 FrameList 1-n Extension 0-1 AnimationPLG 1 GeometryList 1 Geometry 1 MaterialList 1-n Material 1 Texture 1 Extension 1 BinMeshPLG 1 MorphPLG 1 Atomic 1 Extension 1 SkinPLG 1 Extension 1 AnimationPLG","title":"DFF"},{"location":"resources/DFF/#dff","text":"DFF files are used to store information about models, static or actors. Therefore they not only contain geometry and material information but also information about animations, bones and skinning. They are structured in the RWBS format.","title":"DFF"},{"location":"resources/DFF/#data-format","text":"Please see the RWBS articles.","title":"Data format"},{"location":"resources/DFF/#common-structure","text":"1 Clump 1 FrameList 1-n Extension 0-1 AnimationPLG 1 GeometryList 1 Geometry 1 MaterialList 1-n Material 1 Texture 1 Extension 1 BinMeshPLG 1 MorphPLG 1 Atomic 1 Extension 1 SkinPLG 1 Extension 1 AnimationPLG","title":"Common structure"},{"location":"resources/SKA/","text":"SKA \u00b6 SKA files are used to describe animations of actors. Despite the data format being developed by Criterion Software for Renderware, the file does not inherit the RWBS format. Data format \u00b6 Size Type Description 4b uint number of frames 4b uint flags unused 4b float duration KeyFrame[] the frames KeyFrame \u00b6 Size Type Description 16b Quaternion Bone rotation 12b Vector Bone position 4b float time 4b uint data offset of parent frames","title":"SKA"},{"location":"resources/SKA/#ska","text":"SKA files are used to describe animations of actors. Despite the data format being developed by Criterion Software for Renderware, the file does not inherit the RWBS format.","title":"SKA"},{"location":"resources/SKA/#data-format","text":"Size Type Description 4b uint number of frames 4b uint flags unused 4b float duration KeyFrame[] the frames","title":"Data format"},{"location":"resources/SKA/#keyframe","text":"Size Type Description 16b Quaternion Bone rotation 12b Vector Bone position 4b float time 4b uint data offset of parent frames","title":"KeyFrame"},{"location":"resources/CFG/CFG_Map/","text":"Map markers (map.cfg) \u00b6 map.cfg stores various map markers, unfortunately there exists another internal but similar map marker list. The relationship between those two has yet to be analysed. Format \u00b6 Size Type Description 4B uint count of map markers MapMarker[] the array of map markers MapMarker \u00b6 Size Type Description 4B int X position on the map 4B int Y position on the map 4B enum section of the marker (see sections ) 4B uint scene id of the marker Section \u00b6 Value Name 1 FairyGarden 2 EnchantedForest 3 MountainWorld 4 DarkSwamp 5 ShadowRealm 6 RealmOfClouds 7 London Ingame display \u00b6 The color bitmap of the map displayed in the game is stored in BITMAPS/MAP001T.BMP , but the game shows sections only if the player has the respective item. The information what pixels to draw is stored in BITMAPS/MAP001M.RAW which is an array of bytes with size 640*480, where each byte is a section number. The map markers stored in map.cfg are not always shown but the scene name is shown upon hovering the mouse near a marker (in a circle with radius 50px).","title":"Map markers (map.cfg)"},{"location":"resources/CFG/CFG_Map/#map-markers-mapcfg","text":"map.cfg stores various map markers, unfortunately there exists another internal but similar map marker list. The relationship between those two has yet to be analysed.","title":"Map markers (map.cfg)"},{"location":"resources/CFG/CFG_Map/#format","text":"Size Type Description 4B uint count of map markers MapMarker[] the array of map markers","title":"Format"},{"location":"resources/CFG/CFG_Map/#mapmarker","text":"Size Type Description 4B int X position on the map 4B int Y position on the map 4B enum section of the marker (see sections ) 4B uint scene id of the marker","title":"MapMarker"},{"location":"resources/CFG/CFG_Map/#section","text":"Value Name 1 FairyGarden 2 EnchantedForest 3 MountainWorld 4 DarkSwamp 5 ShadowRealm 6 RealmOfClouds 7 London","title":"Section"},{"location":"resources/CFG/CFG_Map/#ingame-display","text":"The color bitmap of the map displayed in the game is stored in BITMAPS/MAP001T.BMP , but the game shows sections only if the player has the respective item. The information what pixels to draw is stored in BITMAPS/MAP001M.RAW which is an array of bytes with size 640*480, where each byte is a section number. The map markers stored in map.cfg are not always shown but the scene name is shown upon hovering the mouse near a marker (in a circle with radius 50px).","title":"Ingame display"},{"location":"resources/CFG/CFG_Vars/","text":"Tweak variables (ai.cfg / wizform.cfg / net.cfg) \u00b6 These config files store variables which are either a floating point number or a string. The binary format is a bit unnecessary complicated and the actual use of the variables is yet to be known. Format \u00b6 Size Type Description 16B MD5 A MD5 hash of the current file starting at the first named variable 3B uint unknown header CfgValue unknown first value (see CfgValue ) CfgVariable[] array of variables to the end of the file (see CfgVariable ) CfgVariable \u00b6 Size Type Description 1B uint size of name string char[] name string, but every character is XOR'ed with 0x75 1B char zero byte (as end character for the name) CfgValue value of the variable CfgValue \u00b6 Size Type Description 4B float numeric value (of the variable) 1B uint size of the string value, if > 0 the numeric value is set to 0.0 char[] value string 1B char ignored end byte (in the most cases 0)","title":"Tweak variables (ai.cfg / wizform.cfg / net.cfg)"},{"location":"resources/CFG/CFG_Vars/#tweak-variables-aicfg-wizformcfg-netcfg","text":"These config files store variables which are either a floating point number or a string. The binary format is a bit unnecessary complicated and the actual use of the variables is yet to be known.","title":"Tweak variables (ai.cfg / wizform.cfg / net.cfg)"},{"location":"resources/CFG/CFG_Vars/#format","text":"Size Type Description 16B MD5 A MD5 hash of the current file starting at the first named variable 3B uint unknown header CfgValue unknown first value (see CfgValue ) CfgVariable[] array of variables to the end of the file (see CfgVariable )","title":"Format"},{"location":"resources/CFG/CFG_Vars/#cfgvariable","text":"Size Type Description 1B uint size of name string char[] name string, but every character is XOR'ed with 0x75 1B char zero byte (as end character for the name) CfgValue value of the variable","title":"CfgVariable"},{"location":"resources/CFG/CFG_Vars/#cfgvalue","text":"Size Type Description 4B float numeric value (of the variable) 1B uint size of the string value, if > 0 the numeric value is set to 0.0 char[] value string 1B char ignored end byte (in the most cases 0)","title":"CfgValue"},{"location":"resources/FBS/","text":"Basic information \u00b6 FBS files are used to store various numeric and/or textual data about various aspects of the gameplay. They store information about the texts displayed in the game, fairy, spell, item and NPC information. They are the biggest source for scripts . This format was developed by Funatics Entertainment for ZanZarah. Data format \u00b6 There are actually two types of FBS files: the one whose only file is called \"_fb0x00.fbs\" and all the other files. The first one is the database index file, it stores all column names and some number which doesn't seem to be used and is the same for all columns. Size Type Description 4b uint number of column data Column[] the columns Column \u00b6 Size Type Description 4b uint type zstring name of the column The other database files store the actual row data, but every row has its indivitually sized array of columns and data type it stores in those columns. Every row has at least an uid column which is therefore not even mentioned in the index file. Unfortunately the column index stored in the row data is not always correct, but the order of row data is for one database always the same. Size Type Description 4b uint number of rows Row[] row data Row \u00b6 Size Type Description 4b uint UID of row 4b uint number of filled columns ColumnData[] the data ColumnData \u00b6 Size Type Description 4b enum data type 4b uint the column index This is eiter zstring, 4b uint, 1b uint, UUID or Buffer data type enum \u00b6 Name Value String 0 Uint 1 UUID 3 Byte 4 Buffer 5 UUID \u00b6 Size Type Description 4b uint unused 4b uint uid 4b uint type Buffer \u00b6 Size Type Description 4b uint size 1b uint[] data The content \u00b6 Filename Description fb0x00 The index file fb0x01 Fairies fb0x02 Strings fb0x03 Spells fb0x04 Items fb0x05 NPCs fb0x06 Dialog lines","title":"Basic information"},{"location":"resources/FBS/#basic-information","text":"FBS files are used to store various numeric and/or textual data about various aspects of the gameplay. They store information about the texts displayed in the game, fairy, spell, item and NPC information. They are the biggest source for scripts . This format was developed by Funatics Entertainment for ZanZarah.","title":"Basic information"},{"location":"resources/FBS/#data-format","text":"There are actually two types of FBS files: the one whose only file is called \"_fb0x00.fbs\" and all the other files. The first one is the database index file, it stores all column names and some number which doesn't seem to be used and is the same for all columns. Size Type Description 4b uint number of column data Column[] the columns","title":"Data format"},{"location":"resources/FBS/#column","text":"Size Type Description 4b uint type zstring name of the column The other database files store the actual row data, but every row has its indivitually sized array of columns and data type it stores in those columns. Every row has at least an uid column which is therefore not even mentioned in the index file. Unfortunately the column index stored in the row data is not always correct, but the order of row data is for one database always the same. Size Type Description 4b uint number of rows Row[] row data","title":"Column"},{"location":"resources/FBS/#row","text":"Size Type Description 4b uint UID of row 4b uint number of filled columns ColumnData[] the data","title":"Row"},{"location":"resources/FBS/#columndata","text":"Size Type Description 4b enum data type 4b uint the column index This is eiter zstring, 4b uint, 1b uint, UUID or Buffer","title":"ColumnData"},{"location":"resources/FBS/#data-type-enum","text":"Name Value String 0 Uint 1 UUID 3 Byte 4 Buffer 5","title":"data type enum"},{"location":"resources/FBS/#uuid","text":"Size Type Description 4b uint unused 4b uint uid 4b uint type","title":"UUID"},{"location":"resources/FBS/#buffer","text":"Size Type Description 4b uint size 1b uint[] data","title":"Buffer"},{"location":"resources/FBS/#the-content","text":"Filename Description fb0x00 The index file fb0x01 Fairies fb0x02 Strings fb0x03 Spells fb0x04 Items fb0x05 NPCs fb0x06 Dialog lines","title":"The content"},{"location":"resources/FBS/fb0x01/","text":"Fairies (fb0x01) \u00b6 This file contains information about the fairies. Columns \u00b6 Idx Name Description 0 Mesh A string containing the mesh file 1 Name A foreign key UID to fb0x02 containing the name 2 Class0 An integer between 0 and 12, signifies the element class 3 CardId The unique identifier between fairies, spells and items, see CardId 4 unknown A column that suits its name, it is zero for all fairies and thus can propably be ignored 5-15 Level0-9 A first (spell) level data, see this table about their values 16 Info A foreign key UID to fb0x02 containing a descriptive text 17 MHP An integer containing some base hitpoint count 18 EvolCId An integer containing either -1 or the ID of the fairy this one evolves into 19 EvolVar An integer containing either -1 or the Level at which the fairy evolves 20 MovSpeed An integer containing some base movement speed 21 JumpPower An integer containing some base jump height factor 22 CriticalHit An integer propably pointing to a critical hit damage pointer 23 Sphere The meaning of this column is yet to be known 24 LevelUp As well as this 25 Voice An integer used in the generation of some sound filenames 26 Class1 An integer between 0 and 6 containing some unknown information Class order \u00b6 The order of classes which thus points to the value of Class0 is as following: Nature Air Water Light Energy Psi Rock Ice Fire Night Chaos Metal Level section data \u00b6 Level0 to Level9 can be split up into 5 different numbers: Bitrange Description 0-3 First class of spell requirement (always equal to Class0) 4-7 Second class of spell requirement 8-11 Third class of spell requirement 12-14 Spell slot index 16-31 Level from which this data applies A spell requirement of 13 means every class fits (joker class), 0 means no requirement. The game uses this data to determine the spell requirements of a fairy from a specific level on. Order \u00b6 The following order can be extracted from the CardId values: Silia Viteria Boneria Grem Gremor Gremrock Tadana Aquana Oceana Worgot Corgot Symgot Airia Luria Laticia Rasrow Maulrow Psyrow Abery Abnobery Vesbat Stobat Garbat Cera Amnis Ceramnis Blumella Mencre Mensec Violectra Biolectra Pix Ferix Daemonex Feez Greez Greezloc Skelbo Skeljaw Skelrath Sirael Gorael Fathrael Darbue Bue Lighbue Beltaur Mentaur Clum Clumaur Pfoe Taze Glacess Akritar Sirella Dracwin Flagwin Tinefol Tinerog Tinezard Tineves Fygaery Jumjum Jumrock Goop Minari Megari Gigarex Segbuzz Manox Turnox Dredanox Lighane Driane Suane Lana Liana","title":"Fairies (fb0x01)"},{"location":"resources/FBS/fb0x01/#fairies-fb0x01","text":"This file contains information about the fairies.","title":"Fairies (fb0x01)"},{"location":"resources/FBS/fb0x01/#columns","text":"Idx Name Description 0 Mesh A string containing the mesh file 1 Name A foreign key UID to fb0x02 containing the name 2 Class0 An integer between 0 and 12, signifies the element class 3 CardId The unique identifier between fairies, spells and items, see CardId 4 unknown A column that suits its name, it is zero for all fairies and thus can propably be ignored 5-15 Level0-9 A first (spell) level data, see this table about their values 16 Info A foreign key UID to fb0x02 containing a descriptive text 17 MHP An integer containing some base hitpoint count 18 EvolCId An integer containing either -1 or the ID of the fairy this one evolves into 19 EvolVar An integer containing either -1 or the Level at which the fairy evolves 20 MovSpeed An integer containing some base movement speed 21 JumpPower An integer containing some base jump height factor 22 CriticalHit An integer propably pointing to a critical hit damage pointer 23 Sphere The meaning of this column is yet to be known 24 LevelUp As well as this 25 Voice An integer used in the generation of some sound filenames 26 Class1 An integer between 0 and 6 containing some unknown information","title":"Columns"},{"location":"resources/FBS/fb0x01/#class-order","text":"The order of classes which thus points to the value of Class0 is as following: Nature Air Water Light Energy Psi Rock Ice Fire Night Chaos Metal","title":"Class order"},{"location":"resources/FBS/fb0x01/#level-section-data","text":"Level0 to Level9 can be split up into 5 different numbers: Bitrange Description 0-3 First class of spell requirement (always equal to Class0) 4-7 Second class of spell requirement 8-11 Third class of spell requirement 12-14 Spell slot index 16-31 Level from which this data applies A spell requirement of 13 means every class fits (joker class), 0 means no requirement. The game uses this data to determine the spell requirements of a fairy from a specific level on.","title":"Level section data"},{"location":"resources/FBS/fb0x01/#order","text":"The following order can be extracted from the CardId values: Silia Viteria Boneria Grem Gremor Gremrock Tadana Aquana Oceana Worgot Corgot Symgot Airia Luria Laticia Rasrow Maulrow Psyrow Abery Abnobery Vesbat Stobat Garbat Cera Amnis Ceramnis Blumella Mencre Mensec Violectra Biolectra Pix Ferix Daemonex Feez Greez Greezloc Skelbo Skeljaw Skelrath Sirael Gorael Fathrael Darbue Bue Lighbue Beltaur Mentaur Clum Clumaur Pfoe Taze Glacess Akritar Sirella Dracwin Flagwin Tinefol Tinerog Tinezard Tineves Fygaery Jumjum Jumrock Goop Minari Megari Gigarex Segbuzz Manox Turnox Dredanox Lighane Driane Suane Lana Liana","title":"Order"},{"location":"resources/FBS/fb0x02/","text":"Strings (fb0x02) \u00b6 The second database file contains all localized strings except dialog text. Columns \u00b6 Idx Name Description 0 Text Contains the actual text 1 Group Contains an integer between 0 and 15 see groups 2 Define Contains a string uniquely describing this text among all others, propably not used by the game Groups \u00b6 The text entries are sorted into categories, at least group 3 (Credits) is used in a special way. Value Name 0 WizForm - Names 1 Spell - Names 2 Items - Names 3 Credits 4 Menus 5 Npc - Names 6 unused 7 Scene Names 8 Signs 9 Item - Descriptions 10 Spell Descriptions 11 WizForm - Descriptions 12 Help 13 Dance Descriptions 14 Start Dialog 15 Class Group","title":"Strings (fb0x02)"},{"location":"resources/FBS/fb0x02/#strings-fb0x02","text":"The second database file contains all localized strings except dialog text.","title":"Strings (fb0x02)"},{"location":"resources/FBS/fb0x02/#columns","text":"Idx Name Description 0 Text Contains the actual text 1 Group Contains an integer between 0 and 15 see groups 2 Define Contains a string uniquely describing this text among all others, propably not used by the game","title":"Columns"},{"location":"resources/FBS/fb0x02/#groups","text":"The text entries are sorted into categories, at least group 3 (Credits) is used in a special way. Value Name 0 WizForm - Names 1 Spell - Names 2 Items - Names 3 Credits 4 Menus 5 Npc - Names 6 unused 7 Scene Names 8 Signs 9 Item - Descriptions 10 Spell Descriptions 11 WizForm - Descriptions 12 Help 13 Dance Descriptions 14 Start Dialog 15 Class Group","title":"Groups"},{"location":"resources/FBS/fb0x03/","text":"Spells (fb0x03) \u00b6 The third database file describes all spells in the game. Columns \u00b6 Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name of the spell 1 Type An integer either 0 for attack spell or 1 for support spell 2 CardId The unique identifier between fairies, spells and items, see CardId 3 PriceA An integer between 0 and 12 describing the first usage requirement (see class order ) 4 PriceB An integer between 0 and 12 describing the second usage requirement (see class order ) 5 PriceC An integer between 0 and 12 describing the third usage requirement (see class order ) 6 Info A foreign key UID to fb0x02 containing a descriptive text for the spell 7 Mana An integer between 0 and 5 defining the amount of mana this spell has (see mana amount table ) 8 Loadup An integer between 0 and 4 defining the speed at which this spell can be load up (no further details known yet) 9 unknown This integer column is always 0 and thus can propably be ignored 10 MissileEffect An integer either containing -1 or the part of an effect filename 11 ImpactEffect An integer either containing -1 or the part of an effect filename 12 Damage An integer between 0 and 4 defining the base damage this spell does (no further details known yet) 13 Behavior An integer pointing to the special Behavior this spell has (see Behavior tables ) Mana amount table \u00b6 Value Actual amount 0 5 1 15 2 30 3 40 4 50 5 Unlimited Behavior \u00b6 This column value is an index to an internal array which defines its support or critical hit spell Behavior depending of its type: Support Behavior \u00b6 Index Name (Internal) 0 no support Behavior 1 20% less damage 2 50% less damage 3 80% less damage 4 no damage 5 20% more damage 6 40% more damage 7 60% more damage 8 80% more damage 9 100% more damage 10 20% more damage in case of a critical hit 11 40% more damage in case of a critical hit 12 60% more damage in case of a critical hit 13 80% more damage in case of a critical hit 14 100% more damage in case of a critical hit 15 20% more damage in case of a critical hit 16 40% more damage in case of a critical hit 17 60% more damage in case of a critical hit 18 80% more damage in case of a critical hit 19 100% more damage in case of a critical hit 20 20% faster spell loadup 21 40% faster spell loadup 22 60% faster spell loadup 23 80% faster spell loadup 24 100% faster spell loadup 25 20% more cirtical hit probability 26 40% more cirtical hit probability 27 60% more cirtical hit probability 28 80% more cirtical hit probability 29 100% more cirtical hit probability 30 15% faster movement 31 30% faster movement 32 45% faster movement 33 60% faster movement 34 75% faster movement 35 20% faster jump power loadup 36 40% faster jump power loadup 37 60% faster jump power loadup 38 80% faster jump power loadup 39 100% faster jump power loadup 40 Heal 1 hitpoint 41 Heal 5 hitpoint 42 Heal 10 hitpoint 43 Heal 20 hitpoint 44 Heal 50 hitpoint 45 Critical hits have no effect 46 Transform damagepoints at the enemy to hitpoints at the own puppet 47 Reflect damage 48 Use support spell instead off jumppower 49 Can't be poison 50 Can't be frozen 51 Can't be silent 52 Can't be curse 53 Can't be burn 54 No conditions Critical hit Behavior \u00b6 Index Name (Internal) 0 No critical hit Behavior 1 20% More damage at enemy 2 40% More damage at enemy 3 60% More damage at enemy 4 80% More damage at enemy 5 100% More damage at enemy 6 Produce 5 hitpoints 7 Produce 10 hitpoints 8 Produce 25 hitpoints 9 Produce 30 hitpoints 10 Produce 50 hitpoints 11 20% Slower movement 12 40% Slower movement 13 60% Slower movement 14 80% Slower movement 15 100% Slower movement 16 20% Slower spell loadup 17 40% Slower spell loadup 18 60% Slower spell loadup 19 80% Slower spell loadup 20 100% Slower spell loadup 21 50% Less jump power 22 100% Less jump power 23 20% Less mana 24 40% Less mana 25 60% Less mana 26 80% Less mana 27 100% Less mana 28 No attack spells 29 No support spell 30 Disable jumping 31 Spin 32 Set condition poison 33 Set condition burn 34 Set condition curse 35 Set condition frozen 36 Set condition silent 37 No critical hits 38 Instant spell burst 39 Enemy take own damage 40 Invert control 41 Teleport enemy 42 No view Order \u00b6 Small Quake Falling Tree Razor Blade Light Spurs Large Root Storm Powerless Spirit Storm Arrow Tornado Great Displacement Small Waves Hail of Needles Hail of Knives Slight Insanity Call of the Water Reflection Bundled Light Light Arrow Surge of Light Enchanted Light No Discharge Chain Reaction Time Shift Exiled Power Burning Spear Small Spirit Insanity Heavy Thoughts Psi Wave Great Telekinesis Small Stone Flying Rock Falling Rocks Hail of Stones Meteor Ball of Ice Ice Arrow Frost Ray Frozen Spirit Great Hail of Ice Flame Fire Arrow Ball of Fire Burning Hands Burning Souls Darkness Solar Eclipse Arrow of Darkness Ball of Darkness Soul Thief Chaos Lightning Chaos Arrow Spirit of Chaos Burn Out Ball of Chaos Metal Pin Metal Arrow Pins & Needles Magnetism Heavy Metal Birch Skin Oak Skin Sharp Eye Thorn Armour Untouchable Storm Tornado Upward Wind Geysir Hurricane Slight Healing Healing Power Shapeless Power Smooth as Glass Sorrow Shared Power of Light Kiss of Light Painful Charge Lucky Dip Shelter of the Light Targeted Damage Homesickness Dubious Luck View Enhancer Magic Awakening Telekiness Unwavering Spirit Quake of Power Migration of Souls Spiritual Power Flying Stones Stone Spear Stone Skin Magic Guidance Unintentional Movement Magic River Magic Support Severity Jump Magic Absorb Mana Magic Breath Magic Touch Rusty Shield Quick Thinking Magic Shield Bruiser Magic Support Frozen Flying Feet Flyweight Dance of Chaos Creeping Chaos Confused Spirit Devil's Wings Heat Shimmers Liquid Metal Scorching Steel Old Armour Speed of Light Rusty Spear","title":"Spells (fb0x03)"},{"location":"resources/FBS/fb0x03/#spells-fb0x03","text":"The third database file describes all spells in the game.","title":"Spells (fb0x03)"},{"location":"resources/FBS/fb0x03/#columns","text":"Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name of the spell 1 Type An integer either 0 for attack spell or 1 for support spell 2 CardId The unique identifier between fairies, spells and items, see CardId 3 PriceA An integer between 0 and 12 describing the first usage requirement (see class order ) 4 PriceB An integer between 0 and 12 describing the second usage requirement (see class order ) 5 PriceC An integer between 0 and 12 describing the third usage requirement (see class order ) 6 Info A foreign key UID to fb0x02 containing a descriptive text for the spell 7 Mana An integer between 0 and 5 defining the amount of mana this spell has (see mana amount table ) 8 Loadup An integer between 0 and 4 defining the speed at which this spell can be load up (no further details known yet) 9 unknown This integer column is always 0 and thus can propably be ignored 10 MissileEffect An integer either containing -1 or the part of an effect filename 11 ImpactEffect An integer either containing -1 or the part of an effect filename 12 Damage An integer between 0 and 4 defining the base damage this spell does (no further details known yet) 13 Behavior An integer pointing to the special Behavior this spell has (see Behavior tables )","title":"Columns"},{"location":"resources/FBS/fb0x03/#mana-amount-table","text":"Value Actual amount 0 5 1 15 2 30 3 40 4 50 5 Unlimited","title":"Mana amount table"},{"location":"resources/FBS/fb0x03/#behavior","text":"This column value is an index to an internal array which defines its support or critical hit spell Behavior depending of its type:","title":"Behavior"},{"location":"resources/FBS/fb0x03/#support-behavior","text":"Index Name (Internal) 0 no support Behavior 1 20% less damage 2 50% less damage 3 80% less damage 4 no damage 5 20% more damage 6 40% more damage 7 60% more damage 8 80% more damage 9 100% more damage 10 20% more damage in case of a critical hit 11 40% more damage in case of a critical hit 12 60% more damage in case of a critical hit 13 80% more damage in case of a critical hit 14 100% more damage in case of a critical hit 15 20% more damage in case of a critical hit 16 40% more damage in case of a critical hit 17 60% more damage in case of a critical hit 18 80% more damage in case of a critical hit 19 100% more damage in case of a critical hit 20 20% faster spell loadup 21 40% faster spell loadup 22 60% faster spell loadup 23 80% faster spell loadup 24 100% faster spell loadup 25 20% more cirtical hit probability 26 40% more cirtical hit probability 27 60% more cirtical hit probability 28 80% more cirtical hit probability 29 100% more cirtical hit probability 30 15% faster movement 31 30% faster movement 32 45% faster movement 33 60% faster movement 34 75% faster movement 35 20% faster jump power loadup 36 40% faster jump power loadup 37 60% faster jump power loadup 38 80% faster jump power loadup 39 100% faster jump power loadup 40 Heal 1 hitpoint 41 Heal 5 hitpoint 42 Heal 10 hitpoint 43 Heal 20 hitpoint 44 Heal 50 hitpoint 45 Critical hits have no effect 46 Transform damagepoints at the enemy to hitpoints at the own puppet 47 Reflect damage 48 Use support spell instead off jumppower 49 Can't be poison 50 Can't be frozen 51 Can't be silent 52 Can't be curse 53 Can't be burn 54 No conditions","title":"Support Behavior"},{"location":"resources/FBS/fb0x03/#critical-hit-behavior","text":"Index Name (Internal) 0 No critical hit Behavior 1 20% More damage at enemy 2 40% More damage at enemy 3 60% More damage at enemy 4 80% More damage at enemy 5 100% More damage at enemy 6 Produce 5 hitpoints 7 Produce 10 hitpoints 8 Produce 25 hitpoints 9 Produce 30 hitpoints 10 Produce 50 hitpoints 11 20% Slower movement 12 40% Slower movement 13 60% Slower movement 14 80% Slower movement 15 100% Slower movement 16 20% Slower spell loadup 17 40% Slower spell loadup 18 60% Slower spell loadup 19 80% Slower spell loadup 20 100% Slower spell loadup 21 50% Less jump power 22 100% Less jump power 23 20% Less mana 24 40% Less mana 25 60% Less mana 26 80% Less mana 27 100% Less mana 28 No attack spells 29 No support spell 30 Disable jumping 31 Spin 32 Set condition poison 33 Set condition burn 34 Set condition curse 35 Set condition frozen 36 Set condition silent 37 No critical hits 38 Instant spell burst 39 Enemy take own damage 40 Invert control 41 Teleport enemy 42 No view","title":"Critical hit Behavior"},{"location":"resources/FBS/fb0x03/#order","text":"Small Quake Falling Tree Razor Blade Light Spurs Large Root Storm Powerless Spirit Storm Arrow Tornado Great Displacement Small Waves Hail of Needles Hail of Knives Slight Insanity Call of the Water Reflection Bundled Light Light Arrow Surge of Light Enchanted Light No Discharge Chain Reaction Time Shift Exiled Power Burning Spear Small Spirit Insanity Heavy Thoughts Psi Wave Great Telekinesis Small Stone Flying Rock Falling Rocks Hail of Stones Meteor Ball of Ice Ice Arrow Frost Ray Frozen Spirit Great Hail of Ice Flame Fire Arrow Ball of Fire Burning Hands Burning Souls Darkness Solar Eclipse Arrow of Darkness Ball of Darkness Soul Thief Chaos Lightning Chaos Arrow Spirit of Chaos Burn Out Ball of Chaos Metal Pin Metal Arrow Pins & Needles Magnetism Heavy Metal Birch Skin Oak Skin Sharp Eye Thorn Armour Untouchable Storm Tornado Upward Wind Geysir Hurricane Slight Healing Healing Power Shapeless Power Smooth as Glass Sorrow Shared Power of Light Kiss of Light Painful Charge Lucky Dip Shelter of the Light Targeted Damage Homesickness Dubious Luck View Enhancer Magic Awakening Telekiness Unwavering Spirit Quake of Power Migration of Souls Spiritual Power Flying Stones Stone Spear Stone Skin Magic Guidance Unintentional Movement Magic River Magic Support Severity Jump Magic Absorb Mana Magic Breath Magic Touch Rusty Shield Quick Thinking Magic Shield Bruiser Magic Support Frozen Flying Feet Flyweight Dance of Chaos Creeping Chaos Confused Spirit Devil's Wings Heat Shimmers Liquid Metal Scorching Steel Old Armour Speed of Light Rusty Spear","title":"Order"},{"location":"resources/FBS/fb0x04/","text":"Items (fb0x04) \u00b6 The fourth database file is used to store information about the items obtainable or not, as there are a couple of items which are not used in the game and do not even have a german translation. Columns \u00b6 Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name of the item 1 CardId The unique identifier between fairies, spells and items, see CardId 2 Info A foreign key UID to fb0x02 containing a descriptive text for the item 3 Special Should propably an integer between 0 and 1 determining whether the script could be used, but it is 1 for all items 4 Script A script using implementation 2, it is executed when used on a fairy 5 unknown An integer between 0 and 2 maybe used for sorting but this not confirmed yet Order \u00b6 Small Health Medium Health Large Health Healing Leaf Fairy Coin Test Amulet Crystal Medicine Fairy Horn Amulet of Experience Clover Leaf Test Amulet Reserved Magic Card Golden Carrot Reserved Magic Card Ocean Conch Pixie Bag Silver Sphere Golden Sphere Crystal Sphere Garlic Atomizer Catacomb Key Heavy Iron Key Key of the guardian of Pixies Rufus House Key Key to Dwarf Factory Quilin's Staff Of Rule Key to the Town Hall Rune of return Rune of the Fairy Garden Rune of Tiralin Rune of Dunmore Rune of Dwarf Tower Rune of the Cave World Rune of the Ice World Rune of the Realm of Clouds Rune of the Shadow Realm Rune of the Cottage Rune Forest Rune II Swamp Rune II Mountain Rune II Cave Rune II Sky Rune II Dark Rune II Fairy Corel of Air Fairy Corel of Earth Fairy Corel of Fire Fairy Corel of Nature Fairy Corel of PSI Magic Reserved Magic Card Reserved Magic Card Evolutionary Magic of Air Evolutionary Magic of Fire Evolutionary Magic of Nature Elemental Key of Fire Elemental Key of Air Elemental Key of Nature Elemental Key of Earth Book of Fairies Fairy Bag Mana Potion Molding Magic Map of the Fairy Garden Map of the Enchanted Forest Map of the Mountain World Map of the Dark Swamp Map of the Shadow Realm Map of the Realm Of Clouds Reserved Magic Card Reserved Magic Card Tools of the Dwarfs Red Bone Key Green Bone Key Blue Bone Key","title":"Items (fb0x04)"},{"location":"resources/FBS/fb0x04/#items-fb0x04","text":"The fourth database file is used to store information about the items obtainable or not, as there are a couple of items which are not used in the game and do not even have a german translation.","title":"Items (fb0x04)"},{"location":"resources/FBS/fb0x04/#columns","text":"Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name of the item 1 CardId The unique identifier between fairies, spells and items, see CardId 2 Info A foreign key UID to fb0x02 containing a descriptive text for the item 3 Special Should propably an integer between 0 and 1 determining whether the script could be used, but it is 1 for all items 4 Script A script using implementation 2, it is executed when used on a fairy 5 unknown An integer between 0 and 2 maybe used for sorting but this not confirmed yet","title":"Columns"},{"location":"resources/FBS/fb0x04/#order","text":"Small Health Medium Health Large Health Healing Leaf Fairy Coin Test Amulet Crystal Medicine Fairy Horn Amulet of Experience Clover Leaf Test Amulet Reserved Magic Card Golden Carrot Reserved Magic Card Ocean Conch Pixie Bag Silver Sphere Golden Sphere Crystal Sphere Garlic Atomizer Catacomb Key Heavy Iron Key Key of the guardian of Pixies Rufus House Key Key to Dwarf Factory Quilin's Staff Of Rule Key to the Town Hall Rune of return Rune of the Fairy Garden Rune of Tiralin Rune of Dunmore Rune of Dwarf Tower Rune of the Cave World Rune of the Ice World Rune of the Realm of Clouds Rune of the Shadow Realm Rune of the Cottage Rune Forest Rune II Swamp Rune II Mountain Rune II Cave Rune II Sky Rune II Dark Rune II Fairy Corel of Air Fairy Corel of Earth Fairy Corel of Fire Fairy Corel of Nature Fairy Corel of PSI Magic Reserved Magic Card Reserved Magic Card Evolutionary Magic of Air Evolutionary Magic of Fire Evolutionary Magic of Nature Elemental Key of Fire Elemental Key of Air Elemental Key of Nature Elemental Key of Earth Book of Fairies Fairy Bag Mana Potion Molding Magic Map of the Fairy Garden Map of the Enchanted Forest Map of the Mountain World Map of the Dark Swamp Map of the Shadow Realm Map of the Realm Of Clouds Reserved Magic Card Reserved Magic Card Tools of the Dwarfs Red Bone Key Green Bone Key Blue Bone Key","title":"Order"},{"location":"resources/FBS/fb0x05/","text":"NPCs (fb0x05) \u00b6 The fifth database contains information about NPCs mostly in the form of scripts. Columns \u00b6 Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name 1 Script1 This script is executed when the NPC is activated, it often contains dialog control (Impl: 3) 2 Script2 This script seems to be executed when the NPC is deployed, it mostly contains setModel instructions (Impl: 1) 3 Script3 This script seems to be executed on a cyclic basis, but the details are not known yet (Impl: 1) 4 Script4 This script is executed if the player wins a fight against the NPC (Impl: 3) 5 Script5 This script is executed if the player loses a fight against the NPC, mostly contains killPlayer instructions (Impl: 3)","title":"NPCs (fb0x05)"},{"location":"resources/FBS/fb0x05/#npcs-fb0x05","text":"The fifth database contains information about NPCs mostly in the form of scripts.","title":"NPCs (fb0x05)"},{"location":"resources/FBS/fb0x05/#columns","text":"Idx Name Description 0 Name A foreign key UID to fb0x02 containing the name 1 Script1 This script is executed when the NPC is activated, it often contains dialog control (Impl: 3) 2 Script2 This script seems to be executed when the NPC is deployed, it mostly contains setModel instructions (Impl: 1) 3 Script3 This script seems to be executed on a cyclic basis, but the details are not known yet (Impl: 1) 4 Script4 This script is executed if the player wins a fight against the NPC (Impl: 3) 5 Script5 This script is executed if the player loses a fight against the NPC, mostly contains killPlayer instructions (Impl: 3)","title":"Columns"},{"location":"resources/FBS/fb0x06/","text":"Dialogs (fb0x06) \u00b6 Last but not least the sixth database file which stores all of the dialog text along with a reference to the NPC it belongs and optionally a voice column which is not used at all. Columns \u00b6 Idx Name Description 0 Text A string containing the dialog text 1 Npc A foreign key UID to fb0x05 to the NPC it belongs to, is not always valid (as there unused lines) 2 Voice This column is always empty and thus can be ignored","title":"Dialogs (fb0x06)"},{"location":"resources/FBS/fb0x06/#dialogs-fb0x06","text":"Last but not least the sixth database file which stores all of the dialog text along with a reference to the NPC it belongs and optionally a voice column which is not used at all.","title":"Dialogs (fb0x06)"},{"location":"resources/FBS/fb0x06/#columns","text":"Idx Name Description 0 Text A string containing the dialog text 1 Npc A foreign key UID to fb0x05 to the NPC it belongs to, is not always valid (as there unused lines) 2 Voice This column is always empty and thus can be ignored","title":"Columns"},{"location":"resources/RWBS/","text":"Basic information \u00b6 RWBS stands for RenderWare Binary Stream, this format is used for saving models (.dff) and worlds (.bsp) in ZanZarah. It is comprised by a hierachical structure of sections which either store binary data or other sections, so a common structure is: Header RWStruct [some Sections] RWExtension [some plugin section] [some plugin section] Thanks to the GTA Modding Community the format of many sections are known, some other are also more or less understood and described by kabbi . Unfortunately not all sections used in ZanZarah are decrypted yet. Header format \u00b6 Size Type Description 4b uint section identifier 4b uint section size, including child sections or data 4b uint RenderWare version ID Section types used in ZanZarah \u00b6 List sections \u00b6 RWAtomic RWAtomicSection RWClump RWExtension RWFrameList RWGeometry RWGeometryList RWMaterial RWMaterialList RWPlaneSection RWTexture RWWorld Data sections \u00b6 RWStruct RWString RWMorphPLG RWSkinPLG RWBinMeshPLG RWAnimationPLG RWCollisionPLG","title":"Basic information"},{"location":"resources/RWBS/#basic-information","text":"RWBS stands for RenderWare Binary Stream, this format is used for saving models (.dff) and worlds (.bsp) in ZanZarah. It is comprised by a hierachical structure of sections which either store binary data or other sections, so a common structure is: Header RWStruct [some Sections] RWExtension [some plugin section] [some plugin section] Thanks to the GTA Modding Community the format of many sections are known, some other are also more or less understood and described by kabbi . Unfortunately not all sections used in ZanZarah are decrypted yet.","title":"Basic information"},{"location":"resources/RWBS/#header-format","text":"Size Type Description 4b uint section identifier 4b uint section size, including child sections or data 4b uint RenderWare version ID","title":"Header format"},{"location":"resources/RWBS/#section-types-used-in-zanzarah","text":"","title":"Section types used in ZanZarah"},{"location":"resources/RWBS/#list-sections","text":"RWAtomic RWAtomicSection RWClump RWExtension RWFrameList RWGeometry RWGeometryList RWMaterial RWMaterialList RWPlaneSection RWTexture RWWorld","title":"List sections"},{"location":"resources/RWBS/#data-sections","text":"RWStruct RWString RWMorphPLG RWSkinPLG RWBinMeshPLG RWAnimationPLG RWCollisionPLG","title":"Data sections"},{"location":"resources/RWBS/RWAnimationPLG/","text":"RWAnimationPLG (0x0108) \u00b6 The RWAnimationPLG section is the most confusing section of all, not much of it is understood at the moment. It can be seen as child of RWClump , as well as single child of the many RWExtension sections of RWClump -> RWFrameList . Data format \u00b6 Size Type Description 4b int i1 4b bool optional determines if the next items are stored 4b uint ii1 4b uint count of items1 4b uint count of items2 AnimData[] items1 AnimData[] items2 AnimData \u00b6 Size Type Description zstring name 4b enum Currently only Type1 or Type2 Determines type of innerItems1 4b uint count of innerItems1 4b uint count of innerItems2 InnerItems1[] innerItems1 InnerItems2[] innerItems2 InnerItems1 \u00b6 Size Type Description 4b float f1 4b float f2 4b float f3 4b float f4 Only if type is Type2 InnerItems2 \u00b6 Size Type Description 4b uint i1 4b uint i2 4b float f","title":"RWAnimationPLG (0x0108)"},{"location":"resources/RWBS/RWAnimationPLG/#rwanimationplg-0x0108","text":"The RWAnimationPLG section is the most confusing section of all, not much of it is understood at the moment. It can be seen as child of RWClump , as well as single child of the many RWExtension sections of RWClump -> RWFrameList .","title":"RWAnimationPLG (0x0108)"},{"location":"resources/RWBS/RWAnimationPLG/#data-format","text":"Size Type Description 4b int i1 4b bool optional determines if the next items are stored 4b uint ii1 4b uint count of items1 4b uint count of items2 AnimData[] items1 AnimData[] items2","title":"Data format"},{"location":"resources/RWBS/RWAnimationPLG/#animdata","text":"Size Type Description zstring name 4b enum Currently only Type1 or Type2 Determines type of innerItems1 4b uint count of innerItems1 4b uint count of innerItems2 InnerItems1[] innerItems1 InnerItems2[] innerItems2","title":"AnimData"},{"location":"resources/RWBS/RWAnimationPLG/#inneritems1","text":"Size Type Description 4b float f1 4b float f2 4b float f3 4b float f4 Only if type is Type2","title":"InnerItems1"},{"location":"resources/RWBS/RWAnimationPLG/#inneritems2","text":"Size Type Description 4b uint i1 4b uint i2 4b float f","title":"InnerItems2"},{"location":"resources/RWBS/RWAtomic/","text":"RWAtomic (0x0014) \u00b6 Atomic is a container section used in DFF files as child of a Clump section. It is normally accompanied by a Struct section. An atomic section can associate a Frame with a Geometry. - gtamodding Structure format \u00b6 Size Type Description 4b uint frameIndex 4b uint geometryIndex 4b flags Possible flags are CollisionTest (0x01) and Render (0x04) 4b uint unused Possible child sections \u00b6 RWGeometry RWExtension RWSkinPLG","title":"RWAtomic (0x0014)"},{"location":"resources/RWBS/RWAtomic/#rwatomic-0x0014","text":"Atomic is a container section used in DFF files as child of a Clump section. It is normally accompanied by a Struct section. An atomic section can associate a Frame with a Geometry. - gtamodding","title":"RWAtomic (0x0014)"},{"location":"resources/RWBS/RWAtomic/#structure-format","text":"Size Type Description 4b uint frameIndex 4b uint geometryIndex 4b flags Possible flags are CollisionTest (0x01) and Render (0x04) 4b uint unused","title":"Structure format"},{"location":"resources/RWBS/RWAtomic/#possible-child-sections","text":"RWGeometry RWExtension RWSkinPLG","title":"Possible child sections"},{"location":"resources/RWBS/RWAtomicSection/","text":"RWAtomicSection (0x0009) \u00b6 This section is used to define a piece of the world geometry, it is usually child of a RWPlaneSection and propagated through other RWPlaneSection to a RWWorld section. The format of this section was decrypted by kabbi . Structure format \u00b6 Size Type Description 4b uint materialIdBase 4b uint triangleCount 4b uint vertexCount 12b Vector bbox1 12b Vector bbox1 4b uint unused1 4b uint unused2 Vector[] vertices Normal[] normals (1 per vector) optional only if world flags contain Normals 4b uint[] colors (1 per vector) optional only if world flags contain Prelit TexCoord[] texCoords1 (1 per vector) optional only if world flags contain Textured or Textured2 TexCoord[] texCoords2 (1 per vector) optional only if world flags contain Textured2 Triangle[] triangles Normal \u00b6 Size Type Description 1b uint x 1b uint y 1b uint z 1b int p TexCoord \u00b6 Size Type Description 4b float u 4b float v Triangle \u00b6 Size Type Description 2b uint m 2b uint v1 2b uint v2 2b uint v3 Possible child sections \u00b6 RWExtension RWBinMeshPLG RWCollisionPLG","title":"RWAtomicSection (0x0009)"},{"location":"resources/RWBS/RWAtomicSection/#rwatomicsection-0x0009","text":"This section is used to define a piece of the world geometry, it is usually child of a RWPlaneSection and propagated through other RWPlaneSection to a RWWorld section. The format of this section was decrypted by kabbi .","title":"RWAtomicSection (0x0009)"},{"location":"resources/RWBS/RWAtomicSection/#structure-format","text":"Size Type Description 4b uint materialIdBase 4b uint triangleCount 4b uint vertexCount 12b Vector bbox1 12b Vector bbox1 4b uint unused1 4b uint unused2 Vector[] vertices Normal[] normals (1 per vector) optional only if world flags contain Normals 4b uint[] colors (1 per vector) optional only if world flags contain Prelit TexCoord[] texCoords1 (1 per vector) optional only if world flags contain Textured or Textured2 TexCoord[] texCoords2 (1 per vector) optional only if world flags contain Textured2 Triangle[] triangles","title":"Structure format"},{"location":"resources/RWBS/RWAtomicSection/#normal","text":"Size Type Description 1b uint x 1b uint y 1b uint z 1b int p","title":"Normal"},{"location":"resources/RWBS/RWAtomicSection/#texcoord","text":"Size Type Description 4b float u 4b float v","title":"TexCoord"},{"location":"resources/RWBS/RWAtomicSection/#triangle","text":"Size Type Description 2b uint m 2b uint v1 2b uint v2 2b uint v3","title":"Triangle"},{"location":"resources/RWBS/RWAtomicSection/#possible-child-sections","text":"RWExtension RWBinMeshPLG RWCollisionPLG","title":"Possible child sections"},{"location":"resources/RWBS/RWBinMeshPLG/","text":"RWBinMeshPLG (0x050E) \u00b6 The Bin Mesh plugin holds an optimized representation of the model topology. Triangles are grouped together into Meshes by their Material and stored as triangle strips when the rpGEOMETRYTRISTRIP flag (0x1) is set in the Geometry, otherwise as triangle lists. - gtamodding This section can usually be seen as RWExtension childs of RWGeometry or RWAtomicSection . The size of the indices datatype would change to 16 bit if the executable were build for OpenGL. As ZanZarah is DirectX exclusive we ignore this case and always work with 32 bit. Structure format \u00b6 Size Type Description 4b enum TriList (0) or TriStrip (1) 4b uint count of sub-Meshes 4b uint total count of indices Mesh[] the sub-meshes Mesh \u00b6 Size Type Description 4b uint count of indices 4b uint material index (of the geometry/world material list) 4b uint[] indices","title":"RWBinMeshPLG (0x050E)"},{"location":"resources/RWBS/RWBinMeshPLG/#rwbinmeshplg-0x050e","text":"The Bin Mesh plugin holds an optimized representation of the model topology. Triangles are grouped together into Meshes by their Material and stored as triangle strips when the rpGEOMETRYTRISTRIP flag (0x1) is set in the Geometry, otherwise as triangle lists. - gtamodding This section can usually be seen as RWExtension childs of RWGeometry or RWAtomicSection . The size of the indices datatype would change to 16 bit if the executable were build for OpenGL. As ZanZarah is DirectX exclusive we ignore this case and always work with 32 bit.","title":"RWBinMeshPLG (0x050E)"},{"location":"resources/RWBS/RWBinMeshPLG/#structure-format","text":"Size Type Description 4b enum TriList (0) or TriStrip (1) 4b uint count of sub-Meshes 4b uint total count of indices Mesh[] the sub-meshes","title":"Structure format"},{"location":"resources/RWBS/RWBinMeshPLG/#mesh","text":"Size Type Description 4b uint count of indices 4b uint material index (of the geometry/world material list) 4b uint[] indices","title":"Mesh"},{"location":"resources/RWBS/RWClump/","text":"RWClump (0x0010) \u00b6 A Clump is a container for a Frame hierarchy to which Atomics, Lights and Cameras are attached. - gtamodding As ZanZarah does not save any light or camera data this section is exclusively used as root section of DFF files . The structure data is not really intersting as the count of Atomics, etc. can be counted by just reading the other child sections. Structure format \u00b6 Size Type Description 4b uint number of Atomics 4b uint number of Lights optional only after version 0x33000 4b uint number of Cameras optional only after version 0x33000 Possible child sections \u00b6 RWAtomic RWLight RWCamera RWFrameList RWGeometryList RWExtension RWCollisionModel","title":"RWClump (0x0010)"},{"location":"resources/RWBS/RWClump/#rwclump-0x0010","text":"A Clump is a container for a Frame hierarchy to which Atomics, Lights and Cameras are attached. - gtamodding As ZanZarah does not save any light or camera data this section is exclusively used as root section of DFF files . The structure data is not really intersting as the count of Atomics, etc. can be counted by just reading the other child sections.","title":"RWClump (0x0010)"},{"location":"resources/RWBS/RWClump/#structure-format","text":"Size Type Description 4b uint number of Atomics 4b uint number of Lights optional only after version 0x33000 4b uint number of Cameras optional only after version 0x33000","title":"Structure format"},{"location":"resources/RWBS/RWClump/#possible-child-sections","text":"RWAtomic RWLight RWCamera RWFrameList RWGeometryList RWExtension RWCollisionModel","title":"Possible child sections"},{"location":"resources/RWBS/RWCollisionPLG/","text":"RWCollisionPLG (0x011D) \u00b6 The RWCollisionPLG section should obviously store collision data and can be found as RWExtension childs of RWAtomicSection s. Unfortunately neither the GTA community nor kabbi bothered to decrypt this format, but as it seems the collision data is equiavalent to the rendering geometry. TODO: thanks to a leak , this format should be derivable now","title":"RWCollisionPLG (0x011D)"},{"location":"resources/RWBS/RWCollisionPLG/#rwcollisionplg-0x011d","text":"The RWCollisionPLG section should obviously store collision data and can be found as RWExtension childs of RWAtomicSection s. Unfortunately neither the GTA community nor kabbi bothered to decrypt this format, but as it seems the collision data is equiavalent to the rendering geometry. TODO: thanks to a leak , this format should be derivable now","title":"RWCollisionPLG (0x011D)"},{"location":"resources/RWBS/RWExtension/","text":"RWExtension (0x0003) \u00b6 Extension sections are the only list section without a meaningful RWStruct child section attached to it. It is used to store sections by RenderWare plugins and thus can be found in many common list sections. Possible child sections \u00b6 RWAnimationPLG RWBinMeshPLG RWCollisionPLG RWMorphPLG RWSkinPLG","title":"RWExtension (0x0003)"},{"location":"resources/RWBS/RWExtension/#rwextension-0x0003","text":"Extension sections are the only list section without a meaningful RWStruct child section attached to it. It is used to store sections by RenderWare plugins and thus can be found in many common list sections.","title":"RWExtension (0x0003)"},{"location":"resources/RWBS/RWExtension/#possible-child-sections","text":"RWAnimationPLG RWBinMeshPLG RWCollisionPLG RWMorphPLG RWSkinPLG","title":"Possible child sections"},{"location":"resources/RWBS/RWFrameList/","text":"RWFrameList (0x000E) \u00b6 The Frame list stores \"Frames\" whatever these magical structures might be... It can be seen as child of RWAtomic sections. Structure format \u00b6 Size Type Description 4b uint count of frames Frame[] frames Frame \u00b6 Size Type Description 36b Mat3x3 rotation matrix 12b Vector position 4b uint parent frame 4b uint matrix creation flags ( unused ) Possible child sections \u00b6 RWExtension RWAnimationPLG","title":"RWFrameList (0x000E)"},{"location":"resources/RWBS/RWFrameList/#rwframelist-0x000e","text":"The Frame list stores \"Frames\" whatever these magical structures might be... It can be seen as child of RWAtomic sections.","title":"RWFrameList (0x000E)"},{"location":"resources/RWBS/RWFrameList/#structure-format","text":"Size Type Description 4b uint count of frames Frame[] frames","title":"Structure format"},{"location":"resources/RWBS/RWFrameList/#frame","text":"Size Type Description 36b Mat3x3 rotation matrix 12b Vector position 4b uint parent frame 4b uint matrix creation flags ( unused )","title":"Frame"},{"location":"resources/RWBS/RWFrameList/#possible-child-sections","text":"RWExtension RWAnimationPLG","title":"Possible child sections"},{"location":"resources/RWBS/RWGeometry/","text":"RWGeometry (0x000F) \u00b6 This section stores geometric data of models. It can be seen as child of RWGeometryList sections. Structure format \u00b6 Size Type Description 4b enum format (see below) 4b uint count of triangles 4b uint count of vertices 4b uint count of morph targets (should always be 1) 4b float ambient optional only after 0x33000 4b float specular optional only after 0x33000 4b float diffuse optional only after 0x33000 optional only if format does not contain Native : Size Type Description 4b uint[] prelitcolor optional only if format contains Prelit TexCoord[,] texCoords (see below) GTriangle[] triangles MorphTarget[] not optional MorphTarget \u00b6 Size Type Description 12b Vector Center of bounding sphere 4b float Radius of bounding sphere 4b bool hasVertices 4b bool hasNormals Vector[] vertices Vector[] normals (1 per vertex) TexCoord \u00b6 Size Type Description 4b float u 4b float v GTriangle \u00b6 Size Type Description 2b uint v2 2b uint v3 2b uint m 2b uint v1 format enum \u00b6 Name Value Tristrip 0x00000001 Positions 0x00000002 Textured 0x00000004 Prelit 0x00000008 Normals 0x00000010 Light 0x00000020 ModulateMaterialColor 0x00000040 Textured2 0x00000080 Native 0x01000000 Bits 16-23 (mask 0x00FF0000) in the format description give the number of texture coordinate sets (numTexSets). - gtamodding If this value is 0, format decides over the number of texture coordinate sets. Possible child sections \u00b6 RWMaterialList RWExtension RWBinMeshPLG RWMorphPLG","title":"RWGeometry (0x000F)"},{"location":"resources/RWBS/RWGeometry/#rwgeometry-0x000f","text":"This section stores geometric data of models. It can be seen as child of RWGeometryList sections.","title":"RWGeometry (0x000F)"},{"location":"resources/RWBS/RWGeometry/#structure-format","text":"Size Type Description 4b enum format (see below) 4b uint count of triangles 4b uint count of vertices 4b uint count of morph targets (should always be 1) 4b float ambient optional only after 0x33000 4b float specular optional only after 0x33000 4b float diffuse optional only after 0x33000 optional only if format does not contain Native : Size Type Description 4b uint[] prelitcolor optional only if format contains Prelit TexCoord[,] texCoords (see below) GTriangle[] triangles MorphTarget[] not optional","title":"Structure format"},{"location":"resources/RWBS/RWGeometry/#morphtarget","text":"Size Type Description 12b Vector Center of bounding sphere 4b float Radius of bounding sphere 4b bool hasVertices 4b bool hasNormals Vector[] vertices Vector[] normals (1 per vertex)","title":"MorphTarget"},{"location":"resources/RWBS/RWGeometry/#texcoord","text":"Size Type Description 4b float u 4b float v","title":"TexCoord"},{"location":"resources/RWBS/RWGeometry/#gtriangle","text":"Size Type Description 2b uint v2 2b uint v3 2b uint m 2b uint v1","title":"GTriangle"},{"location":"resources/RWBS/RWGeometry/#format-enum","text":"Name Value Tristrip 0x00000001 Positions 0x00000002 Textured 0x00000004 Prelit 0x00000008 Normals 0x00000010 Light 0x00000020 ModulateMaterialColor 0x00000040 Textured2 0x00000080 Native 0x01000000 Bits 16-23 (mask 0x00FF0000) in the format description give the number of texture coordinate sets (numTexSets). - gtamodding If this value is 0, format decides over the number of texture coordinate sets.","title":"format enum"},{"location":"resources/RWBS/RWGeometry/#possible-child-sections","text":"RWMaterialList RWExtension RWBinMeshPLG RWMorphPLG","title":"Possible child sections"},{"location":"resources/RWBS/RWGeometryList/","text":"RWGeometryList (0x001A) \u00b6 RWGeometryList is usually the child of a RWClump section and only contains RWGeometry sections besides its own RWStruct , which does not have very interesting data. Structure format \u00b6 Size Type Description 4b uint number of geometries Possible child sections \u00b6 RWGeometry","title":"RWGeometryList (0x001A)"},{"location":"resources/RWBS/RWGeometryList/#rwgeometrylist-0x001a","text":"RWGeometryList is usually the child of a RWClump section and only contains RWGeometry sections besides its own RWStruct , which does not have very interesting data.","title":"RWGeometryList (0x001A)"},{"location":"resources/RWBS/RWGeometryList/#structure-format","text":"Size Type Description 4b uint number of geometries","title":"Structure format"},{"location":"resources/RWBS/RWGeometryList/#possible-child-sections","text":"RWGeometry","title":"Possible child sections"},{"location":"resources/RWBS/RWMaterial/","text":"RWMaterial (0x0007) \u00b6 This section stores information about how the geometry should look like. It is usually the child of a RWMaterialList section. Structure format \u00b6 Size Type Description 4b uint flags unused 4b uint color 4b uint unused 4b bool isTextured 4b float ambient optional only after 0x30300 4b float specular optional only after 0x30300 4b float diffuse optional only after 0x30300 Possible child sections \u00b6 RWTexture RWExtension","title":"RWMaterial (0x0007)"},{"location":"resources/RWBS/RWMaterial/#rwmaterial-0x0007","text":"This section stores information about how the geometry should look like. It is usually the child of a RWMaterialList section.","title":"RWMaterial (0x0007)"},{"location":"resources/RWBS/RWMaterial/#structure-format","text":"Size Type Description 4b uint flags unused 4b uint color 4b uint unused 4b bool isTextured 4b float ambient optional only after 0x30300 4b float specular optional only after 0x30300 4b float diffuse optional only after 0x30300","title":"Structure format"},{"location":"resources/RWBS/RWMaterial/#possible-child-sections","text":"RWTexture RWExtension","title":"Possible child sections"},{"location":"resources/RWBS/RWMaterialList/","text":"RWMaterialList (0x0008) \u00b6 The material list section stores one or many RWMaterial sections. It is usually the child of a RWGeometry or RWWorld section. Structure format \u00b6 Size Type Description 4b uint number of materials including material instances 4b uint[] material indices A material index equals -1 if it is a material. If the material is an instance of a previously defined material, the index equals the base materials one. - gtamodding Possible child sections \u00b6 RWMaterial","title":"RWMaterialList (0x0008)"},{"location":"resources/RWBS/RWMaterialList/#rwmateriallist-0x0008","text":"The material list section stores one or many RWMaterial sections. It is usually the child of a RWGeometry or RWWorld section.","title":"RWMaterialList (0x0008)"},{"location":"resources/RWBS/RWMaterialList/#structure-format","text":"Size Type Description 4b uint number of materials including material instances 4b uint[] material indices A material index equals -1 if it is a material. If the material is an instance of a previously defined material, the index equals the base materials one. - gtamodding","title":"Structure format"},{"location":"resources/RWBS/RWMaterialList/#possible-child-sections","text":"RWMaterial","title":"Possible child sections"},{"location":"resources/RWBS/RWMorphPLG/","text":"RWMorphPLG (0x0105) \u00b6 The morph plugin is a small RWExtension child of a RWGeometry section. Its use is not clear. Structure format \u00b6 Size Type Description 4b uint morph target index","title":"RWMorphPLG (0x0105)"},{"location":"resources/RWBS/RWMorphPLG/#rwmorphplg-0x0105","text":"The morph plugin is a small RWExtension child of a RWGeometry section. Its use is not clear.","title":"RWMorphPLG (0x0105)"},{"location":"resources/RWBS/RWMorphPLG/#structure-format","text":"Size Type Description 4b uint morph target index","title":"Structure format"},{"location":"resources/RWBS/RWPlaneSection/","text":"RWPlaneSection (0x000A) \u00b6 The plane section section presumably stores information about a dividing plane of a world (as ZanZarah uses Binary Space Partition) and thus usually has one or two RWAtomicSection or other plane sections as childs. The format was decrypted by kabbi but some meaning remains hidden for now. Structure format \u00b6 Size Type Description 4b uint sector type 4b float value 4b bool leftIsWorldSector 4b bool rightIsWorldSector 4b float leftValue 4b float rightValue Possible child sections \u00b6 RWAtomicSection","title":"RWPlaneSection (0x000A)"},{"location":"resources/RWBS/RWPlaneSection/#rwplanesection-0x000a","text":"The plane section section presumably stores information about a dividing plane of a world (as ZanZarah uses Binary Space Partition) and thus usually has one or two RWAtomicSection or other plane sections as childs. The format was decrypted by kabbi but some meaning remains hidden for now.","title":"RWPlaneSection (0x000A)"},{"location":"resources/RWBS/RWPlaneSection/#structure-format","text":"Size Type Description 4b uint sector type 4b float value 4b bool leftIsWorldSector 4b bool rightIsWorldSector 4b float leftValue 4b float rightValue","title":"Structure format"},{"location":"resources/RWBS/RWPlaneSection/#possible-child-sections","text":"RWAtomicSection","title":"Possible child sections"},{"location":"resources/RWBS/RWSkinPLG/","text":"RWSkinPLG (0x0116) \u00b6 The RWSkinPLG section describes the bones of an actor and how these react with the vertices of the model mesh. It is usually found as RWExtension child of a RWAtomic section. Here is a discrepancy between the format described by gtamodding and the one described by kabbi . The differences are not compatible to each other, but the format by kabbi seems to work, so this is what I will using as well, even though it has some strange properties (see bone matrix). Structure format \u00b6 Size Type Description 4b uint bone count 4b uint vertex count 4x1b uint[] vertexIndices (1 set per vertex) 4x4b float[] vertexWeights (1 set per vertex) Bone[] bones Bone \u00b6 Size Type Description 4b uint i1 4b uint idx 4b BoneFlags bone flags 12b Vector right 4b uint unused 12b Vector up 4b uint unused 12b Vector at 4b uint unused 12b Vector pos 4b uint unused Bone flags \u00b6 Flag-Bit Description 0 Is childless 1 Has another sibling 3 unknown","title":"RWSkinPLG (0x0116)"},{"location":"resources/RWBS/RWSkinPLG/#rwskinplg-0x0116","text":"The RWSkinPLG section describes the bones of an actor and how these react with the vertices of the model mesh. It is usually found as RWExtension child of a RWAtomic section. Here is a discrepancy between the format described by gtamodding and the one described by kabbi . The differences are not compatible to each other, but the format by kabbi seems to work, so this is what I will using as well, even though it has some strange properties (see bone matrix).","title":"RWSkinPLG (0x0116)"},{"location":"resources/RWBS/RWSkinPLG/#structure-format","text":"Size Type Description 4b uint bone count 4b uint vertex count 4x1b uint[] vertexIndices (1 set per vertex) 4x4b float[] vertexWeights (1 set per vertex) Bone[] bones","title":"Structure format"},{"location":"resources/RWBS/RWSkinPLG/#bone","text":"Size Type Description 4b uint i1 4b uint idx 4b BoneFlags bone flags 12b Vector right 4b uint unused 12b Vector up 4b uint unused 12b Vector at 4b uint unused 12b Vector pos 4b uint unused","title":"Bone"},{"location":"resources/RWBS/RWSkinPLG/#bone-flags","text":"Flag-Bit Description 0 Is childless 1 Has another sibling 3 unknown","title":"Bone flags"},{"location":"resources/RWBS/RWString/","text":"RWString (0x0002) \u00b6 The string section is used to store a single string, whose size is determined by the section size. In ZanZarah files it is only used in RWTexture sections.","title":"RWString (0x0002)"},{"location":"resources/RWBS/RWString/#rwstring-0x0002","text":"The string section is used to store a single string, whose size is determined by the section size. In ZanZarah files it is only used in RWTexture sections.","title":"RWString (0x0002)"},{"location":"resources/RWBS/RWStruct/","text":"RWStruct (0x0001) \u00b6 The RWStruct section is used by every list section (except RWExtension ) to define binary information for the parent section.","title":"RWStruct (0x0001)"},{"location":"resources/RWBS/RWStruct/#rwstruct-0x0001","text":"The RWStruct section is used by every list section (except RWExtension ) to define binary information for the parent section.","title":"RWStruct (0x0001)"},{"location":"resources/RWBS/RWTexture/","text":"RWTexture (0x0006) \u00b6 A texture section is used to store identifying information about a texture and it's alpha layer. - gtamodding It is usually the child of a RWMaterial section. It has one to two RWString sections which define the color/alpha texture filename. Structure format \u00b6 Size Type Description 1b enum filterMode (see below) 4bit enum U addressing mode (see below) 4bit enum V addressing mode (see below) 15bit uint unused filterMode enum \u00b6 Name Value NAFilterMode 0 Nearest 1 Linear 2 MipNearest 3 MipLinear 4 LinearMipNearest 5 LinearMipLinear 6 U/V addressing mode \u00b6 Name Value NATextureAddresss 0 Wrap 1 Mirror 2 Clamp 3 Border 4 Possible child sections \u00b6 RWString RWExtension","title":"RWTexture (0x0006)"},{"location":"resources/RWBS/RWTexture/#rwtexture-0x0006","text":"A texture section is used to store identifying information about a texture and it's alpha layer. - gtamodding It is usually the child of a RWMaterial section. It has one to two RWString sections which define the color/alpha texture filename.","title":"RWTexture (0x0006)"},{"location":"resources/RWBS/RWTexture/#structure-format","text":"Size Type Description 1b enum filterMode (see below) 4bit enum U addressing mode (see below) 4bit enum V addressing mode (see below) 15bit uint unused","title":"Structure format"},{"location":"resources/RWBS/RWTexture/#filtermode-enum","text":"Name Value NAFilterMode 0 Nearest 1 Linear 2 MipNearest 3 MipLinear 4 LinearMipNearest 5 LinearMipLinear 6","title":"filterMode enum"},{"location":"resources/RWBS/RWTexture/#uv-addressing-mode","text":"Name Value NATextureAddresss 0 Wrap 1 Mirror 2 Clamp 3 Border 4","title":"U/V addressing mode"},{"location":"resources/RWBS/RWTexture/#possible-child-sections","text":"RWString RWExtension","title":"Possible child sections"},{"location":"resources/RWBS/RWWorld/","text":"RWWorld (0x000B) \u00b6 The RWWorld section stores header information for the world geometry and is the root section of BSP files . The format was described by kabbi . Structure format \u00b6 Size Type Description 4b bool rootIsWorldSector 12b Vector invWorldOrigin 4b float ambient 4b float specular 4b float diffuse 4b uint total count of triangles 4b uint total count of plane sectors 4b uint total count of world sectors 4b uint colSectorSize 4b enum format (see below) format enum \u00b6 Name Value Tristrip 0x00000001 Positions 0x00000002 Textured 0x00000004 Prelit 0x00000008 Normals 0x00000010 Light 0x00000020 ModulateMaterialColor 0x00000040 Textured2 0x00000080 Native 0x01000000 NativeInstance 0x02000000 SectorsOverlap 0x40000000 Possible child sections \u00b6 RWMaterialList RWPlaneSection RWAtomicSection RWExtension","title":"RWWorld (0x000B)"},{"location":"resources/RWBS/RWWorld/#rwworld-0x000b","text":"The RWWorld section stores header information for the world geometry and is the root section of BSP files . The format was described by kabbi .","title":"RWWorld (0x000B)"},{"location":"resources/RWBS/RWWorld/#structure-format","text":"Size Type Description 4b bool rootIsWorldSector 12b Vector invWorldOrigin 4b float ambient 4b float specular 4b float diffuse 4b uint total count of triangles 4b uint total count of plane sectors 4b uint total count of world sectors 4b uint colSectorSize 4b enum format (see below)","title":"Structure format"},{"location":"resources/RWBS/RWWorld/#format-enum","text":"Name Value Tristrip 0x00000001 Positions 0x00000002 Textured 0x00000004 Prelit 0x00000008 Normals 0x00000010 Light 0x00000020 ModulateMaterialColor 0x00000040 Textured2 0x00000080 Native 0x01000000 NativeInstance 0x02000000 SectorsOverlap 0x40000000","title":"format enum"},{"location":"resources/RWBS/RWWorld/#possible-child-sections","text":"RWMaterialList RWPlaneSection RWAtomicSection RWExtension","title":"Possible child sections"},{"location":"resources/SCN/","text":"Basic information \u00b6 The scene format contains all gameplay-specific informations about a world the player might travel. This also includes all duel arenas where the player is controlling a fairy instead of Amy. This does not include any form of geometry, which would be stored in BSP and DFF files. General format \u00b6 The scene format consists of several sections each of which may only occur once in the file and each of which has its own binary format. Each sections starts with a section name as a zstring and its size is determined by its content. A section name is always contained in brackets [...] The first section name to occur is Scenefile which does not have any further content. The last section name is EOS which also does not have any further content. Many sections contain an structure array whose count is the first unsigned 32bit integer in the section content. The following sections may occur: Sections \u00b6 Link Name(s) Description [x] Version information about build version, date/time, author, release country... [x] Misc mostly unknown information about the scene in general [x] WaypointSystem mostly unknown information about the waypoints [x] Dataset various gameplay information like scene id or name -/- SceneOrigin A vector to the middle of the world [x] Backdrop A specifier about the background of the scene [x] Lights A collection of light information [x] FOModels FOModels_v2 FOModels_v3 FOModels_v4 A collection of optional models [x] Models Models_v2 Models_v3 Models_v4 A collection of important models [x] DynamicModels A collection of apparence-changing models [x] Triggers A collection of triggers [x] Samples 2DSamples_v2 A collection of 2D samples [x] 3DSamples_v2 A collection of 3D samples [x] Effects Effects_v2 A collection of effects [x] VertexModifiers mostly unknown collection of vertex modifiers [x] TextureProperties Footsteps applicable to certain textures [x] Behaviors collection of Behaviors tied to models [x] Scene completly unknown collection about scene items -/- SoundProvider An unused specifier (32bit uint) about some kind of sound settings [x] AmbientSound A specifier about the ambient sounds [x] Music A specifier about the music","title":"Basic information"},{"location":"resources/SCN/#basic-information","text":"The scene format contains all gameplay-specific informations about a world the player might travel. This also includes all duel arenas where the player is controlling a fairy instead of Amy. This does not include any form of geometry, which would be stored in BSP and DFF files.","title":"Basic information"},{"location":"resources/SCN/#general-format","text":"The scene format consists of several sections each of which may only occur once in the file and each of which has its own binary format. Each sections starts with a section name as a zstring and its size is determined by its content. A section name is always contained in brackets [...] The first section name to occur is Scenefile which does not have any further content. The last section name is EOS which also does not have any further content. Many sections contain an structure array whose count is the first unsigned 32bit integer in the section content. The following sections may occur:","title":"General format"},{"location":"resources/SCN/#sections","text":"Link Name(s) Description [x] Version information about build version, date/time, author, release country... [x] Misc mostly unknown information about the scene in general [x] WaypointSystem mostly unknown information about the waypoints [x] Dataset various gameplay information like scene id or name -/- SceneOrigin A vector to the middle of the world [x] Backdrop A specifier about the background of the scene [x] Lights A collection of light information [x] FOModels FOModels_v2 FOModels_v3 FOModels_v4 A collection of optional models [x] Models Models_v2 Models_v3 Models_v4 A collection of important models [x] DynamicModels A collection of apparence-changing models [x] Triggers A collection of triggers [x] Samples 2DSamples_v2 A collection of 2D samples [x] 3DSamples_v2 A collection of 3D samples [x] Effects Effects_v2 A collection of effects [x] VertexModifiers mostly unknown collection of vertex modifiers [x] TextureProperties Footsteps applicable to certain textures [x] Behaviors collection of Behaviors tied to models [x] Scene completly unknown collection about scene items -/- SoundProvider An unused specifier (32bit uint) about some kind of sound settings [x] AmbientSound A specifier about the ambient sounds [x] Music A specifier about the music","title":"Sections"},{"location":"resources/SCN/SCN_2DSample/","text":"2D Samples (2DSamples_v2) \u00b6 This sections describes 2D samples, but much is yet to be known how these are triggered. Format \u00b6 The section is an array of 2DSample structures. Size Type Description 4B uint index in FX category (see SceneItemTypes ) zstring sound filename 4B uint volume (0-100) 4B uint loop count 1B uint unknown some flag","title":"2D Samples (2DSamples_v2)"},{"location":"resources/SCN/SCN_2DSample/#2d-samples-2dsamples_v2","text":"This sections describes 2D samples, but much is yet to be known how these are triggered.","title":"2D Samples (2DSamples_v2)"},{"location":"resources/SCN/SCN_2DSample/#format","text":"The section is an array of 2DSample structures. Size Type Description 4B uint index in FX category (see SceneItemTypes ) zstring sound filename 4B uint volume (0-100) 4B uint loop count 1B uint unknown some flag","title":"Format"},{"location":"resources/SCN/SCN_3DSample/","text":"3D Samples (3DSamples_v2) \u00b6 This sections describes 3D samples, but much is yet to be known how these are triggered. Format \u00b6 The section is an array of 3DSample structures. Size Type Description 4B uint index in FX category (see SceneItemTypes ) zstring sound filename 12B Vec3f position 12B Vec3f forward 12B Vec3f up 4B float minimal distance 4B float maximum distance 4B uint volume (0-100) 4B uint loop count 4B uint falloff (probably priority based on distance)","title":"3D Samples (3DSamples_v2)"},{"location":"resources/SCN/SCN_3DSample/#3d-samples-3dsamples_v2","text":"This sections describes 3D samples, but much is yet to be known how these are triggered.","title":"3D Samples (3DSamples_v2)"},{"location":"resources/SCN/SCN_3DSample/#format","text":"The section is an array of 3DSample structures. Size Type Description 4B uint index in FX category (see SceneItemTypes ) zstring sound filename 12B Vec3f position 12B Vec3f forward 12B Vec3f up 4B float minimal distance 4B float maximum distance 4B uint volume (0-100) 4B uint loop count 4B uint falloff (probably priority based on distance)","title":"Format"},{"location":"resources/SCN/SCN_AmbientSound/","text":"AmbientSound \u00b6 This section only holds a single 32Bit unsigned integer between 0 and 16 (inclusive), which describes the hardcoded collection of landscape sounds which are played propably at random. For more information see AmbientSoundMgr .","title":"AmbientSound"},{"location":"resources/SCN/SCN_AmbientSound/#ambientsound","text":"This section only holds a single 32Bit unsigned integer between 0 and 16 (inclusive), which describes the hardcoded collection of landscape sounds which are played propably at random. For more information see AmbientSoundMgr .","title":"AmbientSound"},{"location":"resources/SCN/SCN_Backdrop/","text":"Backdrop \u00b6 This section is composed out of a single zstring , which sometimes is a backdrop model which is then used as a static background. If however this string has a underscore _ , there is a number to the left of said underscore which is used by the game to add a hardcoded dynamic background. To the right of the underscore there is a short description of the background which is ignored by the game. Number Used Name Description 1 Yes Vortex 2 Yes Forest 3 Yes Horizon 4 No -/- 5 Yes Swamp 6 No -/- 7 Yes Mountain1 8 No -/- 9 No -/- 10 Yes Garden 11 No -/- 12 Yes waterduel 13 No -/- 14 No -/- 15 Yes DuelSwamp 16 Yes Trainer 17 Yes DuelSpecial 18 Yes DuelLava 19 Yes PreDuel","title":"Backdrop"},{"location":"resources/SCN/SCN_Backdrop/#backdrop","text":"This section is composed out of a single zstring , which sometimes is a backdrop model which is then used as a static background. If however this string has a underscore _ , there is a number to the left of said underscore which is used by the game to add a hardcoded dynamic background. To the right of the underscore there is a short description of the background which is ignored by the game. Number Used Name Description 1 Yes Vortex 2 Yes Forest 3 Yes Horizon 4 No -/- 5 Yes Swamp 6 No -/- 7 Yes Mountain1 8 No -/- 9 No -/- 10 Yes Garden 11 No -/- 12 Yes waterduel 13 No -/- 14 No -/- 15 Yes DuelSwamp 16 Yes Trainer 17 Yes DuelSpecial 18 Yes DuelLava 19 Yes PreDuel","title":"Backdrop"},{"location":"resources/SCN/SCN_Behavior/","text":"Behaviors \u00b6 This section describes how the game should process certain models. Format \u00b6 Size Type Description 4B enum Behavior type 4B uint model idx this Behavior should be connected to BehaviorType \u00b6 The game groups certain Behavior types to one main functionality and then splits up accordingly. Value Name Description 800 Cloud unused 900 SmpleDoorLeft 901 SimpleDoorRight 902 MetalDoorLeft unused 903 CityDoorDown unused 904 CityDoorUp 910 DoorGold see details 911 DoorSilver see details 912 DoorCopper see details 913 DoorBronze see details 914 DoorIron see details 915 DoorPlating unused 916 DoorGlass see details 917 DoorWithLock unused 918 CityDoorLock see details 919 LockedMetalDoor 920 LockedWoodenDoor unused 921 DoorRed see details 922 DoorYellow see details 923 DoorBlue see details 1000 Collectable see details 1001 Collectable_EFF0 1002 Collectable_EFF1 unused 1010 GenCollectable only generated at runtime, not an original name 1011 GenCollectable_EFF0 only generated at runtime (used for coins/crystals), not an original name 1012 GenCollectable_EFF1 only generated at runtime (propably unused), not an original name 1100 Lock 1500 BlockerStone 1501 BlockerPlant unused 1502 MagicBridgeStatic 1503 IronGate unused 1504 MagicBridge0 1505 MagicBridge1 1506 MagicBridge2 2000 LookAtPlayer unused 2001 Swing 2002 FlameAnimation unused 2003 SkyMovement 2004 River2 2005 River3 2006 River4 unused 2007 WaterAnimation unused 2008 YRotate1 2009 YRotate2 2010 Bird unused 2011 TextureWobble unused 2012 SimpleCorona unused 2013 BirdCircle unused 2014 ZRotate1 2015 ZRotate2 2016 XRotate1 2017 XRotate2 2018 River5 unused 2019 River6 unused 2020 River7 unused 2021 River8 unused 2100 FlyAwayVisible unused 2101 FlyAwayInvisible unused 2102 FlyAwayStraight unused","title":"Behaviors"},{"location":"resources/SCN/SCN_Behavior/#behaviors","text":"This section describes how the game should process certain models.","title":"Behaviors"},{"location":"resources/SCN/SCN_Behavior/#format","text":"Size Type Description 4B enum Behavior type 4B uint model idx this Behavior should be connected to","title":"Format"},{"location":"resources/SCN/SCN_Behavior/#behaviortype","text":"The game groups certain Behavior types to one main functionality and then splits up accordingly. Value Name Description 800 Cloud unused 900 SmpleDoorLeft 901 SimpleDoorRight 902 MetalDoorLeft unused 903 CityDoorDown unused 904 CityDoorUp 910 DoorGold see details 911 DoorSilver see details 912 DoorCopper see details 913 DoorBronze see details 914 DoorIron see details 915 DoorPlating unused 916 DoorGlass see details 917 DoorWithLock unused 918 CityDoorLock see details 919 LockedMetalDoor 920 LockedWoodenDoor unused 921 DoorRed see details 922 DoorYellow see details 923 DoorBlue see details 1000 Collectable see details 1001 Collectable_EFF0 1002 Collectable_EFF1 unused 1010 GenCollectable only generated at runtime, not an original name 1011 GenCollectable_EFF0 only generated at runtime (used for coins/crystals), not an original name 1012 GenCollectable_EFF1 only generated at runtime (propably unused), not an original name 1100 Lock 1500 BlockerStone 1501 BlockerPlant unused 1502 MagicBridgeStatic 1503 IronGate unused 1504 MagicBridge0 1505 MagicBridge1 1506 MagicBridge2 2000 LookAtPlayer unused 2001 Swing 2002 FlameAnimation unused 2003 SkyMovement 2004 River2 2005 River3 2006 River4 unused 2007 WaterAnimation unused 2008 YRotate1 2009 YRotate2 2010 Bird unused 2011 TextureWobble unused 2012 SimpleCorona unused 2013 BirdCircle unused 2014 ZRotate1 2015 ZRotate2 2016 XRotate1 2017 XRotate2 2018 River5 unused 2019 River6 unused 2020 River7 unused 2021 River8 unused 2100 FlyAwayVisible unused 2101 FlyAwayInvisible unused 2102 FlyAwayStraight unused","title":"BehaviorType"},{"location":"resources/SCN/SCN_Dataset/","text":"Dataset \u00b6 This section stores various gameplay information about the current scene. Unfortunately the functionality of many flags are not known to this date. Format \u00b6 Size Type Description 4B uint size of inner data, either 32 or 36 4B uint scene id 4B enum scene type 4B uint a string UID containing the name of the scene 1B uint unknown flag 1B uint unknown flag 2B structural padding 4B bool unknown 1B bool can the player change his deck here 3B structural padding 4B uint unknown always 0 4B bool unknown 4B bool if size == 36 unknown zstring always empty zstring always empty Scene type \u00b6 Value Description 0 Overworld scene 1 Arena 2 Multiplayer scene","title":"Dataset"},{"location":"resources/SCN/SCN_Dataset/#dataset","text":"This section stores various gameplay information about the current scene. Unfortunately the functionality of many flags are not known to this date.","title":"Dataset"},{"location":"resources/SCN/SCN_Dataset/#format","text":"Size Type Description 4B uint size of inner data, either 32 or 36 4B uint scene id 4B enum scene type 4B uint a string UID containing the name of the scene 1B uint unknown flag 1B uint unknown flag 2B structural padding 4B bool unknown 1B bool can the player change his deck here 3B structural padding 4B uint unknown always 0 4B bool unknown 4B bool if size == 36 unknown zstring always empty zstring always empty","title":"Format"},{"location":"resources/SCN/SCN_Dataset/#scene-type","text":"Value Description 0 Overworld scene 1 Arena 2 Multiplayer scene","title":"Scene type"},{"location":"resources/SCN/SCN_DynamicModel/","text":"DynamicModels \u00b6 This section describes models which can change their appearence over time, but there is little information how and in which way this occurs. Format \u00b6 The section content contains an structural array. Size Type Description 4B uint some kind of index 4B uint unknown some integer 4B uint unknown some integer 12B Vec3f position 12B Vec3f direction vector 4B float unknown floating parameter 4B float unknown floating parameter 12B Vec3f unknown some vector 4B uint unknown some integer 4B uint unknown some integer DynModelData[3] unknown change parameters (see DynModelData ) DynModelData \u00b6 Size Type Description 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 1B uint unknown some integer 4B uint unknown some color 4B uint unknown some integer parameter zstring model filename zstring texture filename","title":"DynamicModels"},{"location":"resources/SCN/SCN_DynamicModel/#dynamicmodels","text":"This section describes models which can change their appearence over time, but there is little information how and in which way this occurs.","title":"DynamicModels"},{"location":"resources/SCN/SCN_DynamicModel/#format","text":"The section content contains an structural array. Size Type Description 4B uint some kind of index 4B uint unknown some integer 4B uint unknown some integer 12B Vec3f position 12B Vec3f direction vector 4B float unknown floating parameter 4B float unknown floating parameter 12B Vec3f unknown some vector 4B uint unknown some integer 4B uint unknown some integer DynModelData[3] unknown change parameters (see DynModelData )","title":"Format"},{"location":"resources/SCN/SCN_DynamicModel/#dynmodeldata","text":"Size Type Description 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 4B float unknown some floating parameter 1B uint unknown some integer 4B uint unknown some color 4B uint unknown some integer parameter zstring model filename zstring texture filename","title":"DynModelData"},{"location":"resources/SCN/SCN_Effect/","text":"Effects (Effects[_v2]) \u00b6 These sections describe simple effects or how complex effects (per file) should be included. Format \u00b6 Each section is an array of their respective structure. Effect \u00b6 Size Type Description 4B uint some kind of index 4B enum effect type EffectData effect type specific data Effect_v2 \u00b6 Size Type Description 4B uint some kind of index 4B enum effect type 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter EffectData effect type specific data Effect type \u00b6 Value Description 1 4 unused 5 unused 6 7 unused 10 11 Snowflakes 13 Effect data \u00b6 if type == 1 or 5 or 6 or 10 Size Type Description 4B uint unknown some integer parameter 12B Vec3f unknown some vector 12B Vec3f unknown some vector if type == 4 Size Type Description 4B uint unknown some integer parameter 12B Vec3f unknown some vector if type == 7 Size Type Description zstring effect filename 12B Vec3f unknown some vector if type == Snowflakes Size Type Description 4B uint unknown some integer parameter if type == 13 Size Type Description zstring effect filename 12B Vec3f unknown some vector 12B Vec3f unknown some vector 12B Vec3f unknown some vector 4B uint unknown some integer parameter","title":"Effects (Effects[_v2])"},{"location":"resources/SCN/SCN_Effect/#effects-effects_v2","text":"These sections describe simple effects or how complex effects (per file) should be included.","title":"Effects (Effects[_v2])"},{"location":"resources/SCN/SCN_Effect/#format","text":"Each section is an array of their respective structure.","title":"Format"},{"location":"resources/SCN/SCN_Effect/#effect","text":"Size Type Description 4B uint some kind of index 4B enum effect type EffectData effect type specific data","title":"Effect"},{"location":"resources/SCN/SCN_Effect/#effect_v2","text":"Size Type Description 4B uint some kind of index 4B enum effect type 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter 4B uint unknown some integer parameter EffectData effect type specific data","title":"Effect_v2"},{"location":"resources/SCN/SCN_Effect/#effect-type","text":"Value Description 1 4 unused 5 unused 6 7 unused 10 11 Snowflakes 13","title":"Effect type"},{"location":"resources/SCN/SCN_Effect/#effect-data","text":"if type == 1 or 5 or 6 or 10 Size Type Description 4B uint unknown some integer parameter 12B Vec3f unknown some vector 12B Vec3f unknown some vector if type == 4 Size Type Description 4B uint unknown some integer parameter 12B Vec3f unknown some vector if type == 7 Size Type Description zstring effect filename 12B Vec3f unknown some vector if type == Snowflakes Size Type Description 4B uint unknown some integer parameter if type == 13 Size Type Description zstring effect filename 12B Vec3f unknown some vector 12B Vec3f unknown some vector 12B Vec3f unknown some vector 4B uint unknown some integer parameter","title":"Effect data"},{"location":"resources/SCN/SCN_FOModel/","text":"FOModels (FOModels[_v?]) \u00b6 These sections describe optional models, which are not essential to the gameplay. There are different version of the section, but for now only FOModels_v4 is described, as the older versions are not used in the game files. Format \u00b6 Each section is a array of their respective structure. FOModel_v4 \u00b6 Size Type Description 4B uint some kind of index zstring model filename 12B Vec3f position 12B Vec3f direction vector 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B uint color 1B uint detail level at which the model is rendered 1B uint unknown 4B enum render type 1B uint unknown 4B uint unknown Render type \u00b6 Value Name Description 0 Standard1 Alpha cutout 1 Additive1 2 EnvMap32 3 EnvMap64 4 EnvMap96 used in the cathedral 5 EnvMap128 6 EnvMap196 used for the house windows in London 7 EnvMap255 used for the cupboard windows in London 8 Standard2 Metallic? 9 Standard3 Plants? 10 Additive2 used for cob webs 11 Additive3","title":"FOModels (FOModels[_v?])"},{"location":"resources/SCN/SCN_FOModel/#fomodels-fomodels_v","text":"These sections describe optional models, which are not essential to the gameplay. There are different version of the section, but for now only FOModels_v4 is described, as the older versions are not used in the game files.","title":"FOModels (FOModels[_v?])"},{"location":"resources/SCN/SCN_FOModel/#format","text":"Each section is a array of their respective structure.","title":"Format"},{"location":"resources/SCN/SCN_FOModel/#fomodel_v4","text":"Size Type Description 4B uint some kind of index zstring model filename 12B Vec3f position 12B Vec3f direction vector 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B Vec3f unknown some floating parameter 4B uint color 1B uint detail level at which the model is rendered 1B uint unknown 4B enum render type 1B uint unknown 4B uint unknown","title":"FOModel_v4"},{"location":"resources/SCN/SCN_FOModel/#render-type","text":"Value Name Description 0 Standard1 Alpha cutout 1 Additive1 2 EnvMap32 3 EnvMap64 4 EnvMap96 used in the cathedral 5 EnvMap128 6 EnvMap196 used for the house windows in London 7 EnvMap255 used for the cupboard windows in London 8 Standard2 Metallic? 9 Standard3 Plants? 10 Additive2 used for cob webs 11 Additive3","title":"Render type"},{"location":"resources/SCN/SCN_Light/","text":"Lights \u00b6 As the name states, this section defines the scene lights although its effect is yet to be shown. Format \u00b6 The section is an array of light structures. Size Type Description 4B uint index in light category (see SceneItemTypes ) 4B enum Type of the light 4B float Color component red 4B float Color component green 4B float Color component blue 4B float Color component alpha 4B uint Flags (see light-flags ) Type-specific data Directional light \u00b6 Size Type Description 12B Vec3f position 12B Vec3f direction Point light \u00b6 Size Type Description 4B float radius 12B Vec3f position Spot light \u00b6 The cone angle of spot lights are hard-coded to 0.5 radians. Size Type Description 4B float radius 12B Vec3f position 12B Vec3f A point for the spot light to look at (only direction is used) Light type \u00b6 Value Description 1 Directional 2 Ambient (not supported by the scene file) 128 Point 129 Spot","title":"Lights"},{"location":"resources/SCN/SCN_Light/#lights","text":"As the name states, this section defines the scene lights although its effect is yet to be shown.","title":"Lights"},{"location":"resources/SCN/SCN_Light/#format","text":"The section is an array of light structures. Size Type Description 4B uint index in light category (see SceneItemTypes ) 4B enum Type of the light 4B float Color component red 4B float Color component green 4B float Color component blue 4B float Color component alpha 4B uint Flags (see light-flags ) Type-specific data","title":"Format"},{"location":"resources/SCN/SCN_Light/#directional-light","text":"Size Type Description 12B Vec3f position 12B Vec3f direction","title":"Directional light"},{"location":"resources/SCN/SCN_Light/#point-light","text":"Size Type Description 4B float radius 12B Vec3f position","title":"Point light"},{"location":"resources/SCN/SCN_Light/#spot-light","text":"The cone angle of spot lights are hard-coded to 0.5 radians. Size Type Description 4B float radius 12B Vec3f position 12B Vec3f A point for the spot light to look at (only direction is used)","title":"Spot light"},{"location":"resources/SCN/SCN_Light/#light-type","text":"Value Description 1 Directional 2 Ambient (not supported by the scene file) 128 Point 129 Spot","title":"Light type"},{"location":"resources/SCN/SCN_Misc/","text":"Misc \u00b6 This section stores some core data about the scene and how it is supposed to be rendered. Internally this section is split into three parts. Format \u00b6 Size Type Description zstring Name of the world file zstring Path of the world file (always ..\\\\Resources\\\\Worlds\\\\ ) zstring Path to the world textures (always ..\\\\Resources\\\\Textures\\\\Worlds\\\\ ) 4B uint Color of the ambient light (applied only to Atomics) 12B Vec3f unknown 12B Vec3f unknown 4B uint background color (used for clearing) 1B enum Fog type 4B uint if fog!=None fog color 4B float if fog!=None fog distance 4B float unknown 4B float far clip (near clip is constant at 0.1)","title":"Misc"},{"location":"resources/SCN/SCN_Misc/#misc","text":"This section stores some core data about the scene and how it is supposed to be rendered. Internally this section is split into three parts.","title":"Misc"},{"location":"resources/SCN/SCN_Misc/#format","text":"Size Type Description zstring Name of the world file zstring Path of the world file (always ..\\\\Resources\\\\Worlds\\\\ ) zstring Path to the world textures (always ..\\\\Resources\\\\Textures\\\\Worlds\\\\ ) 4B uint Color of the ambient light (applied only to Atomics) 12B Vec3f unknown 12B Vec3f unknown 4B uint background color (used for clearing) 1B enum Fog type 4B uint if fog!=None fog color 4B float if fog!=None fog distance 4B float unknown 4B float far clip (near clip is constant at 0.1)","title":"Format"},{"location":"resources/SCN/SCN_Model/","text":"Models (Models[_v?]) \u00b6 These sections describe models which are essential to the gameplay or the design of the scene. There are different version of the section, but for now only Models_v3 is described, as the other versions are not used in the game files. Format \u00b6 Each section is an array of their respective structure. Model_v3 \u00b6 Size Type Description 4B uint some kind of index zstring model filename 12B Vec3f position 12B Vec3f direction vector 12B Vec3f scale 4B uint color 1B uint unknown 4B uint unknown 1B uint unknown","title":"Models (Models[_v?])"},{"location":"resources/SCN/SCN_Model/#models-models_v","text":"These sections describe models which are essential to the gameplay or the design of the scene. There are different version of the section, but for now only Models_v3 is described, as the other versions are not used in the game files.","title":"Models (Models[_v?])"},{"location":"resources/SCN/SCN_Model/#format","text":"Each section is an array of their respective structure.","title":"Format"},{"location":"resources/SCN/SCN_Model/#model_v3","text":"Size Type Description 4B uint some kind of index zstring model filename 12B Vec3f position 12B Vec3f direction vector 12B Vec3f scale 4B uint color 1B uint unknown 4B uint unknown 1B uint unknown","title":"Model_v3"},{"location":"resources/SCN/SCN_Music/","text":"Music \u00b6 This section which only holds a single 32Bit unsigned integer describes a hardcoded music to be played in the scene. Unfortunately most scenes are specifying 0 as their music, so the real mapping has to be found yet. Value Title Author 0 Main menu Karina Gretere 1 Endeva Karina Gretere 2 Tiralin Matthias Steinwachs 3 Dunmore Matthias Steinwachs 4 Monagham Matthias Steinwachs 5 Battle Theme Karina Gretere 6 Player won battle unknown 7 Player is killed unknown","title":"Music"},{"location":"resources/SCN/SCN_Music/#music","text":"This section which only holds a single 32Bit unsigned integer describes a hardcoded music to be played in the scene. Unfortunately most scenes are specifying 0 as their music, so the real mapping has to be found yet. Value Title Author 0 Main menu Karina Gretere 1 Endeva Karina Gretere 2 Tiralin Matthias Steinwachs 3 Dunmore Matthias Steinwachs 4 Monagham Matthias Steinwachs 5 Battle Theme Karina Gretere 6 Player won battle unknown 7 Player is killed unknown","title":"Music"},{"location":"resources/SCN/SCN_Sample/","text":"Samples [unused] \u00b6 The documentation of this section is delayed as it isn't used anymore in the game files.","title":"Samples [unused]"},{"location":"resources/SCN/SCN_Sample/#samples-unused","text":"The documentation of this section is delayed as it isn't used anymore in the game files.","title":"Samples [unused]"},{"location":"resources/SCN/SCN_Scene/","text":"SceneItems (Scene) \u00b6 This section describes some mapping between items from this scene to names, but most names are empty. How this mapping works is unclear. This most likely is just debug information. Format \u00b6 Size Type Description zstring name 4B uint unknown some integer 4B uint unknown some integer","title":"SceneItems (Scene)"},{"location":"resources/SCN/SCN_Scene/#sceneitems-scene","text":"This section describes some mapping between items from this scene to names, but most names are empty. How this mapping works is unclear. This most likely is just debug information.","title":"SceneItems (Scene)"},{"location":"resources/SCN/SCN_Scene/#format","text":"Size Type Description zstring name 4B uint unknown some integer 4B uint unknown some integer","title":"Format"},{"location":"resources/SCN/SCN_TextureProperty/","text":"TextureProperties \u00b6 This section describes the kind of footstep applicable to this texture. Format \u00b6 The section is an array of TextureProperty structures. Size Type Description zstring texture filename 4B enum see FootstepType FootstepType \u00b6 Every footstep has four different sound files to play (all in the directory AUDIO/SFX/FOOTSTEPS, except for _s013 which can be found in AUDIO/SFX/SPECIALS) Value Description File1 File2 File3 File4 0 Wood/Stone? _f004 _f005 _f006 _f007 1 Snow _f016 _f017 _f018 _f019 2 Metal _f012 _f013 _f014 _f015 3 Wood _f008 _f009 _f010 _f011 4 Grass _f000 _f001 _f002 _f003 5 Mud _f020 _f021 _f022 _f023 6 Marmor _f024 _f025 _f026 _f027 7 Outdoor roads/pathways _f028 _f029 _f030 _f031 8 Stone in the mountains _f032 _f033 _f034 _f035 9 Snow (edge to stone) _f036 _f037 _f038 _f039 10 Metal (lightly damped) _f040 _f041 _f042 _f043 11 Wood, footbridges _f044 _f045 _f046 _f047 12 Grass unused _f048 _f049 _f050 _f051 13 Mud unused _f052 _f053 _f054 _f055 14 Damped wood or carpet _f056 _f057 _f058 _f059 15 Swamp soil _f060 _f061 _f062 _f063 16 Creaky wood (stairs?) _f064 _f065 _f066 _f067 17 Carpet _f068 _f069 _f070 _f071 18 Hard soil _f076 _f077 _f078 _f079 19 Wood unused _f072 _f073 _f074 _f075 N/A Water _s013 _s013 _s013 _s013 Unused in this list are _f080, _f081, _f082 and _f083 which are loud splash noises from when Amy jumps into water.","title":"TextureProperties"},{"location":"resources/SCN/SCN_TextureProperty/#textureproperties","text":"This section describes the kind of footstep applicable to this texture.","title":"TextureProperties"},{"location":"resources/SCN/SCN_TextureProperty/#format","text":"The section is an array of TextureProperty structures. Size Type Description zstring texture filename 4B enum see FootstepType","title":"Format"},{"location":"resources/SCN/SCN_TextureProperty/#footsteptype","text":"Every footstep has four different sound files to play (all in the directory AUDIO/SFX/FOOTSTEPS, except for _s013 which can be found in AUDIO/SFX/SPECIALS) Value Description File1 File2 File3 File4 0 Wood/Stone? _f004 _f005 _f006 _f007 1 Snow _f016 _f017 _f018 _f019 2 Metal _f012 _f013 _f014 _f015 3 Wood _f008 _f009 _f010 _f011 4 Grass _f000 _f001 _f002 _f003 5 Mud _f020 _f021 _f022 _f023 6 Marmor _f024 _f025 _f026 _f027 7 Outdoor roads/pathways _f028 _f029 _f030 _f031 8 Stone in the mountains _f032 _f033 _f034 _f035 9 Snow (edge to stone) _f036 _f037 _f038 _f039 10 Metal (lightly damped) _f040 _f041 _f042 _f043 11 Wood, footbridges _f044 _f045 _f046 _f047 12 Grass unused _f048 _f049 _f050 _f051 13 Mud unused _f052 _f053 _f054 _f055 14 Damped wood or carpet _f056 _f057 _f058 _f059 15 Swamp soil _f060 _f061 _f062 _f063 16 Creaky wood (stairs?) _f064 _f065 _f066 _f067 17 Carpet _f068 _f069 _f070 _f071 18 Hard soil _f076 _f077 _f078 _f079 19 Wood unused _f072 _f073 _f074 _f075 N/A Water _s013 _s013 _s013 _s013 Unused in this list are _f080, _f081, _f082 and _f083 which are loud splash noises from when Amy jumps into water.","title":"FootstepType"},{"location":"resources/SCN/SCN_Trigger/","text":"Triggers \u00b6 This section describes areas in the scene and how the game shall use them. Format \u00b6 The section is an array of Trigger structures. Size Type Description 4B uint some kind of index 4B enum collider type 4B uint flag if direction should be normalized 12B Vec3f direction 4B enum trigger type 4B uint trigger type specific parameter 4B uint trigger type specific parameter 4B uint trigger type specific parameter 4B uint trigger type specific parameter zstring Mostly empty and unused string 12B Vec3f position 12B Vec3f collider type == Box size 4B float collider type == Sphere radius Collider Type \u00b6 Value Description 0 Box 1 Sphere 2 Point Note that internally, there are more collider types, but these are the ones used in the game. Trigger Type \u00b6 Value Name Description 0 Doorway used as entrance/exit of a scene, see detail page 1 SingleplayerStartpoint see detail page 2 MultiplayerStartpoint 3 NpcStartpoint 4 CameraPosition used by scripts to change the camera view, see detail page 5 Waypoint used for NPCs, see detail page 6 StartDuel used only internally 7 LeaveDuel used only internally 8 NpcAttackPosition used mostly for wild fairies, see detail page 9 FlyArea used only internally 10 KillPlayer 11 SetCameraView used only internally 12 SavePoint used only internally 13 SwampMarker 14 RiverMarker 15 PlayVideo used only internally 16 Elevator in the executable it is actually called teleporter 17 GettingACard used only internally 18 Sign 19 GettingPixie used only internally 20 UsingPipe used only internally 21 DancePlatform used only internally 22 LeaveDancePlatform used only internally 23 RemoveStoneBlocker used only internally 24 RemovePlantBlocker used only internally 25 EventCamera this trigger is used by the exectuable to set the camera on certain events like removing stone/plant blockers, CreatePlatforms , etc. 26 Platform see detail page 27 CreatePlatforms see detail page 28 ShadowLight 29 CreateItems see detail page 30 Item see detail page 31 Shrink used only internally 32 WizformMarker used only internally -/- RemoveLock this name is in the executable, but it messes up with the rest of the types 33 IndoorCamera used only internally 34 LensFlare used only internally 35 FogModifier 36 OpenMagicWaypoints used only internally 37 RuneTarget not an original name, used to place Amy after teleporting with rune, ii1 either 0 or 1000, meaning unknown 38 Unused38 no name present in the executable 39 Animal see detail page 40 AnimalWaypoint see detail page 41 SceneOpening used only internally 42 CollectionWizform used in London to place the unused fairies 43 ElementalLock 44 ItemGenerator 45 Escape 46 Jumper used to place air jump fields, effect number yet to be known 47 RefreshMana used only internally 48 StartSubgame used only internally 49 TemporaryNpc 50 EffectBeam 51 MultiplayerObserverPosition 52 MultiplayerHealingPool 53 MultiplayerManaPool 54 Ceiling used in arena scenes to limit flying height 55 HealAllWizforms","title":"Triggers"},{"location":"resources/SCN/SCN_Trigger/#triggers","text":"This section describes areas in the scene and how the game shall use them.","title":"Triggers"},{"location":"resources/SCN/SCN_Trigger/#format","text":"The section is an array of Trigger structures. Size Type Description 4B uint some kind of index 4B enum collider type 4B uint flag if direction should be normalized 12B Vec3f direction 4B enum trigger type 4B uint trigger type specific parameter 4B uint trigger type specific parameter 4B uint trigger type specific parameter 4B uint trigger type specific parameter zstring Mostly empty and unused string 12B Vec3f position 12B Vec3f collider type == Box size 4B float collider type == Sphere radius","title":"Format"},{"location":"resources/SCN/SCN_Trigger/#collider-type","text":"Value Description 0 Box 1 Sphere 2 Point Note that internally, there are more collider types, but these are the ones used in the game.","title":"Collider Type"},{"location":"resources/SCN/SCN_Trigger/#trigger-type","text":"Value Name Description 0 Doorway used as entrance/exit of a scene, see detail page 1 SingleplayerStartpoint see detail page 2 MultiplayerStartpoint 3 NpcStartpoint 4 CameraPosition used by scripts to change the camera view, see detail page 5 Waypoint used for NPCs, see detail page 6 StartDuel used only internally 7 LeaveDuel used only internally 8 NpcAttackPosition used mostly for wild fairies, see detail page 9 FlyArea used only internally 10 KillPlayer 11 SetCameraView used only internally 12 SavePoint used only internally 13 SwampMarker 14 RiverMarker 15 PlayVideo used only internally 16 Elevator in the executable it is actually called teleporter 17 GettingACard used only internally 18 Sign 19 GettingPixie used only internally 20 UsingPipe used only internally 21 DancePlatform used only internally 22 LeaveDancePlatform used only internally 23 RemoveStoneBlocker used only internally 24 RemovePlantBlocker used only internally 25 EventCamera this trigger is used by the exectuable to set the camera on certain events like removing stone/plant blockers, CreatePlatforms , etc. 26 Platform see detail page 27 CreatePlatforms see detail page 28 ShadowLight 29 CreateItems see detail page 30 Item see detail page 31 Shrink used only internally 32 WizformMarker used only internally -/- RemoveLock this name is in the executable, but it messes up with the rest of the types 33 IndoorCamera used only internally 34 LensFlare used only internally 35 FogModifier 36 OpenMagicWaypoints used only internally 37 RuneTarget not an original name, used to place Amy after teleporting with rune, ii1 either 0 or 1000, meaning unknown 38 Unused38 no name present in the executable 39 Animal see detail page 40 AnimalWaypoint see detail page 41 SceneOpening used only internally 42 CollectionWizform used in London to place the unused fairies 43 ElementalLock 44 ItemGenerator 45 Escape 46 Jumper used to place air jump fields, effect number yet to be known 47 RefreshMana used only internally 48 StartSubgame used only internally 49 TemporaryNpc 50 EffectBeam 51 MultiplayerObserverPosition 52 MultiplayerHealingPool 53 MultiplayerManaPool 54 Ceiling used in arena scenes to limit flying height 55 HealAllWizforms","title":"Trigger Type"},{"location":"resources/SCN/SCN_VertexModifier/","text":"VertexModifiers \u00b6 This section describes some kind of vertex modification, but it isn't used in the game files. Format \u00b6 The section is an array of VertexModifier structures. Size Type Description 4B uint some kind of index 4B uint unknown some kind of type 12B Vec3f unknown some vector 4B uint unknown some color 12B Vec3f type == 1 unknown some vector 4B uint unknown some integer parameter 1B uint unknown some byte","title":"VertexModifiers"},{"location":"resources/SCN/SCN_VertexModifier/#vertexmodifiers","text":"This section describes some kind of vertex modification, but it isn't used in the game files.","title":"VertexModifiers"},{"location":"resources/SCN/SCN_VertexModifier/#format","text":"The section is an array of VertexModifier structures. Size Type Description 4B uint some kind of index 4B uint unknown some kind of type 12B Vec3f unknown some vector 4B uint unknown some color 12B Vec3f type == 1 unknown some vector 4B uint unknown some integer parameter 1B uint unknown some byte","title":"Format"},{"location":"resources/SCN/SCN_WaypointSystem/","text":"WaypointSystem \u00b6 This section describes the waypoint system especially for duel scenes, if this section is used for overworld scenes is not confirmed yet. This seems unlikely as none of the arrays for overworld scenes have any content. The waypoints for these scenes are set with triggers . Although the executable does not read certain data for different versions, the only versions used in the files are 5 and 6. Format \u00b6 Size Type Description 4B uint Version of the waypoint system format 4B uint This field has to be zero 24B byte[] version >= 5 unknown 4B uint count of waypoints Waypoint[] see waypoint format 4B uint version >= 2 count of unknown secondary data SecondaryData[] version >= 2 see secondary data format WaypointExt[] version >= 3 for each waypoint some additional information, see waypoint extension format 4B uint This field has to be 0xFFFF Waypoint \u00b6 Size Type Description 4B uint probably an id, unique for every waypoint per scene 4B uint version >= 4 probably an id to another element (is never bigger than the count of waypoints) 12B Vec3f position 4B uint count of first inner data uint[] first inner data, array of waypoint ids 4B uint count of second inner data uint[] second inner data, array of waypoint ids Waypoint extension \u00b6 Size Type Description 4B uint count of third inner data uint[] third inner data, array of waypoint ids Secondary data \u00b6 Size Type Description 4B uint probably an id, does not reference a waypoint 4B uint count of inner data uint[] inner data, array of secondary data ids More understandable format \u00b6 As this format is rather complex, it is probably helpful for a different explanation: The waypoint system has two arrays of data: waypoints and unknown secondary data Waypoints are composed out of An id unequal to their index in the array Another id not always but sometimes the same as the first one A position vector Three arrays with waypoint ids inside them, probably edges between waypoints? The unknown secondary data is composed out of An id An array of secondary data ids","title":"WaypointSystem"},{"location":"resources/SCN/SCN_WaypointSystem/#waypointsystem","text":"This section describes the waypoint system especially for duel scenes, if this section is used for overworld scenes is not confirmed yet. This seems unlikely as none of the arrays for overworld scenes have any content. The waypoints for these scenes are set with triggers . Although the executable does not read certain data for different versions, the only versions used in the files are 5 and 6.","title":"WaypointSystem"},{"location":"resources/SCN/SCN_WaypointSystem/#format","text":"Size Type Description 4B uint Version of the waypoint system format 4B uint This field has to be zero 24B byte[] version >= 5 unknown 4B uint count of waypoints Waypoint[] see waypoint format 4B uint version >= 2 count of unknown secondary data SecondaryData[] version >= 2 see secondary data format WaypointExt[] version >= 3 for each waypoint some additional information, see waypoint extension format 4B uint This field has to be 0xFFFF","title":"Format"},{"location":"resources/SCN/SCN_WaypointSystem/#waypoint","text":"Size Type Description 4B uint probably an id, unique for every waypoint per scene 4B uint version >= 4 probably an id to another element (is never bigger than the count of waypoints) 12B Vec3f position 4B uint count of first inner data uint[] first inner data, array of waypoint ids 4B uint count of second inner data uint[] second inner data, array of waypoint ids","title":"Waypoint"},{"location":"resources/SCN/SCN_WaypointSystem/#waypoint-extension","text":"Size Type Description 4B uint count of third inner data uint[] third inner data, array of waypoint ids","title":"Waypoint extension"},{"location":"resources/SCN/SCN_WaypointSystem/#secondary-data","text":"Size Type Description 4B uint probably an id, does not reference a waypoint 4B uint count of inner data uint[] inner data, array of secondary data ids","title":"Secondary data"},{"location":"resources/SCN/SCN_WaypointSystem/#more-understandable-format","text":"As this format is rather complex, it is probably helpful for a different explanation: The waypoint system has two arrays of data: waypoints and unknown secondary data Waypoints are composed out of An id unequal to their index in the array Another id not always but sometimes the same as the first one A position vector Three arrays with waypoint ids inside them, probably edges between waypoints? The unknown secondary data is composed out of An id An array of secondary data ids","title":"More understandable format"}]}